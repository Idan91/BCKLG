{"ast":null,"code":"import { SET_USER, SET_ERRORS, CLEAR_ERRORS, LOADING_UI, LOADING_USER, SET_UNAUTHENTICATED } from \"../types\";\nimport axios from \"axios\";\nexport const loginUser = (userData, history) => dispatch => {\n  dispatch({\n    type: LOADING_UI\n  });\n  axios.post(\"/login\", userData).then(result => {\n    setAuthrizationHeader(result.data.token);\n    dispatch(getUserData());\n    dispatch({\n      type: CLEAR_ERRORS\n    });\n    history.push(\"/my-backlog\");\n  }).catch(err => {\n    dispatch({\n      type: SET_ERRORS,\n      payload: err.response.data\n    });\n  });\n};\nexport const signInWithFacebook = history => dispatch => {\n  dispatch({\n    type: LOADING_UI\n  });\n  axios.post(\"/signin/facebook\").then(result => {\n    setAuthrizationHeader(result);\n    dispatch(getUserData());\n    dispatch({\n      type: CLEAR_ERRORS\n    });\n    history.push(\"/my-backlog\");\n  }).catch(err => {\n    dispatch({\n      type: SET_ERRORS,\n      payload: err.response.data\n    });\n  });\n};\nexport const signupUser = (newUserData, history) => dispatch => {\n  dispatch({\n    type: LOADING_UI\n  });\n  axios.post(\"/signup\", newUserData).then(() => {\n    dispatch(getUserData());\n    dispatch({\n      type: CLEAR_ERRORS\n    });\n    history.push(\"/login\");\n  }).catch(err => {\n    dispatch({\n      type: SET_ERRORS,\n      payload: err.response.data\n    });\n  });\n};\nexport const logoutUser = () => dispatch => {\n  localStorage.removeItem(\"firebaseIdToken\");\n  delete axios.defaults.headers.common[\"Authorization\"];\n  dispatch({\n    type: SET_UNAUTHENTICATED\n  });\n};\nexport const getUserData = () => dispatch => {\n  dispatch({\n    type: LOADING_USER\n  });\n  axios.get(\"/user\").then(result => {\n    dispatch({\n      type: SET_USER,\n      payload: result.data\n    });\n  }).catch(err => console.log(err));\n};\nexport const sendPasswordResetEmail = i_Email => dispatch => {\n  dispatch({\n    type: LOADING_UI\n  });\n  const resetPasswordRequest = {\n    email: i_Email\n  };\n  axios.post(\"/user/reset-password\", resetPasswordRequest).then(() => {\n    dispatch({\n      type: CLEAR_ERRORS\n    });\n    window.alert(`You should recieve password reset instructions ${resetPasswordRequest.email} shortly`);\n  }).catch(err => {\n    dispatch({\n      type: SET_ERRORS,\n      payload: err.response.data\n    });\n    console.log(err);\n  });\n};\nexport const sendEmailVerification = () => dispatch => {\n  dispatch({\n    type: LOADING_UI\n  });\n  return new Promise((resolve, reject) => {\n    axios.post(\"/user/email-verification\").then(() => {\n      dispatch({\n        type: CLEAR_ERRORS\n      });\n      dispatch(getUserData());\n      let emailVerificationMsg = \"Email verification instructions sent.\";\n      window.alert(emailVerificationMsg);\n      resolve(true);\n    }).catch(err => {\n      dispatch({\n        type: SET_ERRORS,\n        payload: err.response.data\n      });\n      console.log(err);\n      reject(false);\n    });\n  });\n};\nexport const updateUserPassword = i_UpdateRequest => dispatch => {\n  dispatch({\n    type: LOADING_UI\n  });\n  const updateRequest = {\n    email: i_UpdateRequest.email,\n    currentPassword: i_UpdateRequest.currentPassword,\n    newPassword: i_UpdateRequest.newPassword,\n    confirmNewPassword: i_UpdateRequest.confirmNewPassword\n  };\n  return new Promise((resolve, reject) => {\n    axios.post(\"/user/update-password\", updateRequest).then(() => {\n      dispatch({\n        type: CLEAR_ERRORS\n      });\n      dispatch(getUserData());\n      let updateSuccessfullMsg = \"Password updated successfully\";\n      window.alert(updateSuccessfullMsg);\n      resolve(true);\n    }).catch(err => {\n      dispatch({\n        type: SET_ERRORS,\n        payload: err.response.data\n      });\n      console.log(err);\n      reject(false);\n    });\n  });\n};\nexport const updateGames = (username, gameList) => dispatch => {\n  dispatch({\n    type: LOADING_USER\n  });\n  const updateRequest = {\n    username: username,\n    games: gameList\n  };\n  axios.post(\"user/games/update\", updateRequest).then(() => {\n    dispatch(getUserData());\n    dispatch({\n      type: CLEAR_ERRORS\n    });\n  }).catch(err => console.log(err));\n};\nexport const deleteAccount = i_Username => dispatch => {\n  dispatch({\n    type: LOADING_USER\n  });\n  axios.post(\"user/delete\", i_Username).then(() => {\n    dispatch(logoutUser());\n  }).catch(err => console.log(err));\n};\n\nconst setAuthrizationHeader = token => {\n  const firebaseIdToken = `Bearer ${token}`;\n  localStorage.setItem(\"firebaseIdToken\", firebaseIdToken);\n  axios.defaults.headers.common[\"Authorization\"] = firebaseIdToken;\n};","map":{"version":3,"sources":["/Users/Idan/Projects/Dev/GitHub/BCKLG/src/redux/actions/userActions.js"],"names":["SET_USER","SET_ERRORS","CLEAR_ERRORS","LOADING_UI","LOADING_USER","SET_UNAUTHENTICATED","axios","loginUser","userData","history","dispatch","type","post","then","result","setAuthrizationHeader","data","token","getUserData","push","catch","err","payload","response","signInWithFacebook","signupUser","newUserData","logoutUser","localStorage","removeItem","defaults","headers","common","get","console","log","sendPasswordResetEmail","i_Email","resetPasswordRequest","email","window","alert","sendEmailVerification","Promise","resolve","reject","emailVerificationMsg","updateUserPassword","i_UpdateRequest","updateRequest","currentPassword","newPassword","confirmNewPassword","updateSuccessfullMsg","updateGames","username","gameList","games","deleteAccount","i_Username","firebaseIdToken","setItem"],"mappings":"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","sourcesContent":["import {\n  SET_USER,\n  SET_ERRORS,\n  CLEAR_ERRORS,\n  LOADING_UI,\n  LOADING_USER,\n  SET_UNAUTHENTICATED\n} from \"../types\";\nimport axios from \"axios\";\n\nexport const loginUser = (userData, history) => dispatch => {\n  dispatch({ type: LOADING_UI });\n  axios\n    .post(\"/login\", userData)\n    .then(result => {\n      setAuthrizationHeader(result.data.token);\n      dispatch(getUserData());\n      dispatch({ type: CLEAR_ERRORS });\n      history.push(\"/my-backlog\");\n    })\n    .catch(err => {\n      dispatch({\n        type: SET_ERRORS,\n        payload: err.response.data\n      });\n    });\n};\n\nexport const signInWithFacebook = history => dispatch => {\n  dispatch({ type: LOADING_UI });\n  axios\n    .post(\"/signin/facebook\")\n    .then(result => {\n      setAuthrizationHeader(result);\n      dispatch(getUserData());\n      dispatch({ type: CLEAR_ERRORS });\n      history.push(\"/my-backlog\");\n    })\n    .catch(err => {\n      dispatch({\n        type: SET_ERRORS,\n        payload: err.response.data\n      });\n    });\n};\n\nexport const signupUser = (newUserData, history) => dispatch => {\n  dispatch({ type: LOADING_UI });\n  axios\n    .post(\"/signup\", newUserData)\n    .then(() => {\n      dispatch(getUserData());\n      dispatch({ type: CLEAR_ERRORS });\n      history.push(\"/login\");\n    })\n    .catch(err => {\n      dispatch({\n        type: SET_ERRORS,\n        payload: err.response.data\n      });\n    });\n};\n\nexport const logoutUser = () => dispatch => {\n  localStorage.removeItem(\"firebaseIdToken\");\n  delete axios.defaults.headers.common[\"Authorization\"];\n  dispatch({ type: SET_UNAUTHENTICATED });\n};\n\nexport const getUserData = () => dispatch => {\n  dispatch({ type: LOADING_USER });\n\n  axios\n    .get(\"/user\")\n    .then(result => {\n      dispatch({\n        type: SET_USER,\n        payload: result.data\n      });\n    })\n    .catch(err => console.log(err));\n};\n\nexport const sendPasswordResetEmail = i_Email => dispatch => {\n  dispatch({ type: LOADING_UI });\n\n  const resetPasswordRequest = {\n    email: i_Email\n  };\n\n  axios\n    .post(\"/user/reset-password\", resetPasswordRequest)\n    .then(() => {\n      dispatch({ type: CLEAR_ERRORS });\n      window.alert(\n        `You should recieve password reset instructions ${resetPasswordRequest.email} shortly`\n      );\n    })\n    .catch(err => {\n      dispatch({\n        type: SET_ERRORS,\n        payload: err.response.data\n      });\n      console.log(err);\n    });\n};\n\nexport const sendEmailVerification = () => dispatch => {\n  dispatch({ type: LOADING_UI });\n\n  return new Promise((resolve, reject) => {\n    axios\n      .post(\"/user/email-verification\")\n      .then(() => {\n        dispatch({ type: CLEAR_ERRORS });\n        dispatch(getUserData());\n        let emailVerificationMsg = \"Email verification instructions sent.\";\n        window.alert(emailVerificationMsg);\n        resolve(true);\n      })\n      .catch(err => {\n        dispatch({\n          type: SET_ERRORS,\n          payload: err.response.data\n        });\n        console.log(err);\n        reject(false);\n      });\n  });\n};\n\nexport const updateUserPassword = i_UpdateRequest => dispatch => {\n  dispatch({ type: LOADING_UI });\n\n  const updateRequest = {\n    email: i_UpdateRequest.email,\n    currentPassword: i_UpdateRequest.currentPassword,\n    newPassword: i_UpdateRequest.newPassword,\n    confirmNewPassword: i_UpdateRequest.confirmNewPassword\n  };\n\n  return new Promise((resolve, reject) => {\n    axios\n      .post(\"/user/update-password\", updateRequest)\n      .then(() => {\n        dispatch({ type: CLEAR_ERRORS });\n        dispatch(getUserData());\n        let updateSuccessfullMsg = \"Password updated successfully\";\n        window.alert(updateSuccessfullMsg);\n        resolve(true);\n      })\n      .catch(err => {\n        dispatch({\n          type: SET_ERRORS,\n          payload: err.response.data\n        });\n        console.log(err);\n        reject(false);\n      });\n  });\n};\n\nexport const updateGames = (username, gameList) => dispatch => {\n  dispatch({ type: LOADING_USER });\n  const updateRequest = {\n    username: username,\n    games: gameList\n  };\n  axios\n    .post(\"user/games/update\", updateRequest)\n    .then(() => {\n      dispatch(getUserData());\n      dispatch({ type: CLEAR_ERRORS });\n    })\n    .catch(err => console.log(err));\n};\n\nexport const deleteAccount = i_Username => dispatch => {\n  dispatch({ type: LOADING_USER });\n  axios\n    .post(\"user/delete\", i_Username)\n    .then(() => {\n      dispatch(logoutUser());\n    })\n    .catch(err => console.log(err));\n};\n\nconst setAuthrizationHeader = token => {\n  const firebaseIdToken = `Bearer ${token}`;\n  localStorage.setItem(\"firebaseIdToken\", firebaseIdToken);\n  axios.defaults.headers.common[\"Authorization\"] = firebaseIdToken;\n};\n"]},"metadata":{},"sourceType":"module"}