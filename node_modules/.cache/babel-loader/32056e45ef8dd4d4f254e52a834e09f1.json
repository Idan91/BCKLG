{"ast":null,"code":"var _jsxFileName = \"/Users/Idan/Projects/Dev/GitHub/BCKLG/src/components/Home Pages/login.js\";\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Logo from \"../UI Elements/Logo\";\nimport PropTypes from \"prop-types\";\nimport googleIcon from \"../../resources/google_G.svg\"; // Redux\n\nimport { connect } from \"react-redux\";\nimport { loginUser, signInWithFacebook, sendPasswordResetEmail } from \"../../redux/actions/userActions\";\n\nconst firebase = require(\"firebase\");\n\nconst config = require(\"../util/firebaseConfig\");\n\nfirebase.initializeApp(config);\n\nclass login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      email: \"\",\n      emailForgot: \"\",\n      password: \"\",\n      errors: {},\n      forgotVisible: false,\n      signInOptions: [\"facebook\", \"google\", \"email\"]\n    };\n\n    this.handleInputChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.handleKeyDown = event => {\n      if (event.keyCode === 13) {\n        this.handleSubmit(event);\n      }\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      const userData = {\n        email: this.state.email,\n        password: this.state.password\n      };\n      this.props.loginUser(userData, this.props.history);\n    };\n\n    this.handleForgotPassword = () => {\n      this.setState({\n        forgotVisible: !this.state.forgotVisible\n      });\n    };\n\n    this.handleResetEmail = event => {\n      event.preventDefault();\n      const email = this.state.emailForgot;\n\n      try {\n        this.props.sendPasswordResetEmail(email);\n      } catch (err) {\n        alert(err);\n        console.log(err);\n      }\n    };\n\n    this.renderForgotPassword = i_Errors => {\n      const {\n        UI: {\n          loading\n        }\n      } = this.props;\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"login-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"sub-page-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, \"Forgot Password\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"form-description-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"form-description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, \"Please enter your email and we'll send you instructions on how to reset your password\")), React.createElement(\"form\", {\n        onSubmit: this.handleResetEmail,\n        className: \"form login-form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, this.state.emailForgot !== \"\" && React.createElement(\"p\", {\n        className: \"field-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, \"Email\"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"userdata-input\",\n        name: \"emailForgot\",\n        placeholder: \"Email\",\n        value: this.state.emailForgot,\n        onChange: this.handleInputChange,\n        onKeyDown: this.handleKeyDown,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }), i_Errors.emailForgot && React.createElement(\"p\", {\n        className: \"helper-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, i_Errors.emailForgot), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"loader-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, loading && React.createElement(\"div\", {\n        className: \"loader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"btn btn-submit link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"Submit\")), i_Errors.general && React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"error-msg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, i_Errors.general), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"btn btn-sml btn-gray link\",\n        onClick: this.handleForgotPassword,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, \"Cancel\")));\n    };\n\n    this.renderLoginForm = (i_Errors, i_Loading) => {\n      return React.createElement(\"div\", {\n        className: \"login-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        className: \"form login-form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, this.state.email !== \"\" && React.createElement(\"p\", {\n        className: \"field-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, \"Email\"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"userdata-input\",\n        name: \"email\",\n        placeholder: \"Email\",\n        value: this.state.email,\n        onChange: this.handleInputChange,\n        onKeyDown: this.handleKeyDown,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }), i_Errors.email && React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"helper-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, i_Errors.email), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      })), this.state.password !== \"\" && React.createElement(\"p\", {\n        className: \"field-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, \"Password\"), React.createElement(\"input\", {\n        type: \"password\",\n        className: \"userdata-input\",\n        name: \"password\",\n        placeholder: \"Password\",\n        value: this.state.password,\n        onChange: this.handleInputChange,\n        onKeyDown: this.handleKeyDown,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }), i_Errors.password && React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"helper-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, i_Errors.password), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }), i_Loading && React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"loader-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"loader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"btn btn-submit link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, \"Login\"), i_Errors.general && React.createElement(\"p\", {\n        className: \"error-msg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, i_Errors.general)), React.createElement(\"button\", {\n        className: \"btn btn-sml btn-gray link\",\n        onClick: this.handleForgotPassword,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, \"Forgot Password\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"body-question\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, \"Don't have an account? \"), \" \", React.createElement(Link, {\n        to: \"/sign-up\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, \"Sign up here\")));\n    };\n\n    this.handleFbLogin = () => {\n      // this.props.signInWithFacebook(this.props.history);\n      const provider = new firebase.auth.FacebookAuthProvider();\n      firebase.auth().signInWithPopup(provider).then(result => {\n        const token = result.credential.accessToken;\n        const user = result.user;\n        return {\n          token,\n          user\n        };\n      }).catch(err => {\n        console.error(err);\n        return response.status(403).json({\n          general: \"Wrong credentials, please try again\"\n        });\n      });\n    };\n\n    this.renderLoginPage = () => {\n      const {\n        errors\n      } = this.state;\n      const {\n        UI: {\n          loading\n        }\n      } = this.props;\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"page-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"center-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, React.createElement(Logo, {\n        currentPage: \"Login\",\n        logoType: \"vert\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"btn btn-sign-in-with btn-facebook link\",\n        onClick: this.handleFbLogin,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fab fa-facebook-f facebook-icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }), \"\\xA0\\xA0\\xA0\\xA0Sign in with Facebook\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"btn btn-sign-in-with btn-google link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: googleIcon,\n        alt: \"\",\n        className: \"google-icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }), \"\\xA0\\xA0\\xA0\\xA0Sign in with Google\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"btn btn-sign-in-with btn-email link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fas fa-at\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }), \"\\xA0\\xA0\\xA0\\xA0Sign in with email\")), this.state.forgotVisible ? this.renderForgotPassword(errors) : this.renderLoginForm(errors, loading)));\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.UI.errors) {\n      this.setState({\n        errors: nextProps.UI.errors\n      });\n    }\n  }\n\n  render() {\n    return this.renderLoginPage();\n  }\n\n}\n\nlogin.propTypes = {\n  loginUser: PropTypes.func.isRequired,\n  signInWithFacebook: PropTypes.func.isRequired,\n  sendPasswordResetEmail: PropTypes.func.isRequired,\n  user: PropTypes.object.isRequired,\n  UI: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  user: state.user,\n  UI: state.UI\n});\n\nconst mapActionsToProps = {\n  loginUser,\n  signInWithFacebook,\n  sendPasswordResetEmail\n};\nexport default connect(mapStateToProps, mapActionsToProps)(login);","map":{"version":3,"sources":["/Users/Idan/Projects/Dev/GitHub/BCKLG/src/components/Home Pages/login.js"],"names":["React","Component","Link","Logo","PropTypes","connect","loginUser","signInWithFacebook","sendPasswordResetEmail","firebase","require","config","initializeApp","login","state","email","emailForgot","password","errors","forgotVisible","signInOptions","handleInputChange","event","setState","target","name","value","handleKeyDown","keyCode","handleSubmit","preventDefault","userData","props","history","handleForgotPassword","handleResetEmail","err","alert","console","log","renderForgotPassword","i_Errors","UI","loading","general","renderLoginForm","i_Loading","handleFbLogin","provider","auth","FacebookAuthProvider","signInWithPopup","then","result","token","credential","accessToken","user","catch","error","response","status","json","renderLoginPage","googleIcon","UNSAFE_componentWillReceiveProps","nextProps","render","propTypes","func","isRequired","object","mapStateToProps","mapActionsToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Logo from \"../UI Elements/Logo\";\nimport PropTypes from \"prop-types\";\nimport googleIcon from \"../../resources/google_G.svg\";\n// Redux\nimport { connect } from \"react-redux\";\nimport {\n  loginUser,\n  signInWithFacebook,\n  sendPasswordResetEmail\n} from \"../../redux/actions/userActions\";\n\nconst firebase = require(\"firebase\");\nconst config = require(\"../util/firebaseConfig\");\n\nfirebase.initializeApp(config);\n\nclass login extends Component {\n  state = {\n    email: \"\",\n    emailForgot: \"\",\n    password: \"\",\n    errors: {},\n    forgotVisible: false,\n    signInOptions: [\"facebook\", \"google\", \"email\"]\n  };\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.UI.errors) {\n      this.setState({\n        errors: nextProps.UI.errors\n      });\n    }\n  }\n\n  handleInputChange = event => {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  };\n\n  handleKeyDown = event => {\n    if (event.keyCode === 13) {\n      this.handleSubmit(event);\n    }\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n    const userData = {\n      email: this.state.email,\n      password: this.state.password\n    };\n    this.props.loginUser(userData, this.props.history);\n  };\n\n  handleForgotPassword = () => {\n    this.setState({\n      forgotVisible: !this.state.forgotVisible\n    });\n  };\n\n  handleResetEmail = event => {\n    event.preventDefault();\n    const email = this.state.emailForgot;\n\n    try {\n      this.props.sendPasswordResetEmail(email);\n    } catch (err) {\n      alert(err);\n      console.log(err);\n    }\n  };\n\n  renderForgotPassword = i_Errors => {\n    const {\n      UI: { loading }\n    } = this.props;\n\n    return (\n      <React.Fragment>\n        <div className=\"login-container\">\n          <h2 className=\"sub-page-title\">Forgot Password</h2>\n          <br />\n          <div className=\"form-description-container\">\n            <p className=\"form-description\">\n              Please enter your email and we'll send you instructions on how to\n              reset your password\n            </p>\n          </div>\n          <form onSubmit={this.handleResetEmail} className=\"form login-form\">\n            {this.state.emailForgot !== \"\" && (\n              <p className=\"field-label\">Email</p>\n            )}\n            <input\n              type=\"text\"\n              className=\"userdata-input\"\n              name=\"emailForgot\"\n              placeholder=\"Email\"\n              value={this.state.emailForgot}\n              onChange={this.handleInputChange}\n              onKeyDown={this.handleKeyDown}\n            ></input>\n            {i_Errors.emailForgot && (\n              <p className=\"helper-text\">{i_Errors.emailForgot}</p>\n            )}\n            <br />\n            <div className=\"loader-container\">\n              {loading && <div className=\"loader\" />}\n            </div>\n            <br />\n            <button className=\"btn btn-submit link\">Submit</button>\n          </form>\n          {i_Errors.general && (\n            <React.Fragment>\n              <p className=\"error-msg\">{i_Errors.general}</p>\n              <br />\n            </React.Fragment>\n          )}\n          <br />\n          <button\n            className=\"btn btn-sml btn-gray link\"\n            onClick={this.handleForgotPassword}\n          >\n            Cancel\n          </button>\n        </div>\n      </React.Fragment>\n    );\n  };\n\n  renderLoginForm = (i_Errors, i_Loading) => {\n    return (\n      <div className=\"login-container\">\n        <form onSubmit={this.handleSubmit} className=\"form login-form\">\n          {this.state.email !== \"\" && <p className=\"field-label\">Email</p>}\n          <input\n            type=\"text\"\n            className=\"userdata-input\"\n            name=\"email\"\n            placeholder=\"Email\"\n            value={this.state.email}\n            onChange={this.handleInputChange}\n            onKeyDown={this.handleKeyDown}\n          ></input>\n          <br />\n          {i_Errors.email && (\n            <React.Fragment>\n              <p className=\"helper-text\">{i_Errors.email}</p>\n              <br />\n            </React.Fragment>\n          )}\n          {this.state.password !== \"\" && (\n            <p className=\"field-label\">Password</p>\n          )}\n          <input\n            type=\"password\"\n            className=\"userdata-input\"\n            name=\"password\"\n            placeholder=\"Password\"\n            value={this.state.password}\n            onChange={this.handleInputChange}\n            onKeyDown={this.handleKeyDown}\n          ></input>\n          {i_Errors.password && (\n            <React.Fragment>\n              <p className=\"helper-text\">{i_Errors.password}</p>\n              <br />\n            </React.Fragment>\n          )}\n          <br />\n          {i_Loading && (\n            <React.Fragment>\n              <div className=\"loader-container\">\n                <div className=\"loader\" />\n              </div>\n            </React.Fragment>\n          )}\n          <br />\n          <button className=\"btn btn-submit link\">Login</button>\n          {i_Errors.general && <p className=\"error-msg\">{i_Errors.general}</p>}\n        </form>\n        <button\n          className=\"btn btn-sml btn-gray link\"\n          onClick={this.handleForgotPassword}\n        >\n          Forgot Password\n        </button>\n        <br />\n        <br />\n        <div className=\"body-question\">\n          <span>Don't have an account? </span>{\" \"}\n          <Link to=\"/sign-up\">Sign up here</Link>\n        </div>\n      </div>\n    );\n  };\n\n  handleFbLogin = () => {\n    // this.props.signInWithFacebook(this.props.history);\n\n    const provider = new firebase.auth.FacebookAuthProvider();\n\n    firebase\n      .auth()\n      .signInWithPopup(provider)\n      .then(result => {\n        const token = result.credential.accessToken;\n        const user = result.user;\n\n        return { token, user };\n      })\n      .catch(err => {\n        console.error(err);\n        return response\n          .status(403)\n          .json({ general: \"Wrong credentials, please try again\" });\n      });\n  };\n\n  renderLoginPage = () => {\n    const { errors } = this.state;\n    const {\n      UI: { loading }\n    } = this.props;\n\n    return (\n      <React.Fragment>\n        <div className=\"page-container\">\n          <div className=\"center-container\">\n            <Logo currentPage=\"Login\" logoType=\"vert\" />\n            <br />\n            <br />\n            <button\n              className=\"btn btn-sign-in-with btn-facebook link\"\n              onClick={this.handleFbLogin}\n            >\n              <i className=\"fab fa-facebook-f facebook-icon\"></i>\n              &nbsp;&nbsp;&nbsp;&nbsp;Sign in with Facebook\n            </button>\n            <br />\n            <button className=\"btn btn-sign-in-with btn-google link\">\n              <img src={googleIcon} alt=\"\" className=\"google-icon\" />\n              &nbsp;&nbsp;&nbsp;&nbsp;Sign in with Google\n            </button>\n            <br />\n            <button className=\"btn btn-sign-in-with btn-email link\">\n              <i className=\"fas fa-at\"></i>\n              &nbsp;&nbsp;&nbsp;&nbsp;Sign in with email\n            </button>\n          </div>\n          {this.state.forgotVisible\n            ? this.renderForgotPassword(errors)\n            : this.renderLoginForm(errors, loading)}\n        </div>\n      </React.Fragment>\n    );\n  };\n\n  render() {\n    return this.renderLoginPage();\n  }\n}\n\nlogin.propTypes = {\n  loginUser: PropTypes.func.isRequired,\n  signInWithFacebook: PropTypes.func.isRequired,\n  sendPasswordResetEmail: PropTypes.func.isRequired,\n  user: PropTypes.object.isRequired,\n  UI: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  user: state.user,\n  UI: state.UI\n});\n\nconst mapActionsToProps = {\n  loginUser,\n  signInWithFacebook,\n  sendPasswordResetEmail\n};\n\nexport default connect(mapStateToProps, mapActionsToProps)(login);\n"]},"metadata":{},"sourceType":"module"}