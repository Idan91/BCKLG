{"ast":null,"code":"import{SET_USER,SET_ERRORS,CLEAR_ERRORS,LOADING_UI,LOADING_USER,SET_UNAUTHENTICATED}from\"../types\";import axios from\"axios\";export var loginUser=function loginUser(userData,history){return function(dispatch){dispatch({type:LOADING_UI});axios.post(\"/login\",userData).then(function(result){setAuthrizationHeader(result.data.token);dispatch(getUserData());dispatch({type:CLEAR_ERRORS});history.push(\"/my-backlog\");}).catch(function(err){dispatch({type:SET_ERRORS,payload:err.response.data});});};};export var signupUser=function signupUser(newUserData,history){return function(dispatch){dispatch({type:LOADING_UI});axios.post(\"/signup\",newUserData).then(function(){dispatch(getUserData());dispatch({type:CLEAR_ERRORS});history.push(\"/login\");}).catch(function(err){dispatch({type:SET_ERRORS,payload:err.response.data});});};};export var logoutUser=function logoutUser(){return function(dispatch){localStorage.removeItem(\"firebaseIdToken\");delete axios.defaults.headers.common[\"Authorization\"];dispatch({type:SET_UNAUTHENTICATED});};};export var getUserData=function getUserData(){return function(dispatch){dispatch({type:LOADING_USER});axios.get(\"/user\").then(function(result){dispatch({type:SET_USER,payload:result.data});}).catch(function(err){return console.log(err);});};};export var sendPasswordResetEmail=function sendPasswordResetEmail(i_Email){return function(dispatch){dispatch({type:LOADING_UI});var resetPasswordRequest={email:i_Email};axios.post(\"/user/reset-password\",resetPasswordRequest).then(function(){dispatch({type:CLEAR_ERRORS});window.alert(\"You should recieve password reset instructions \".concat(resetPasswordRequest.email,\" shortly\"));}).catch(function(err){dispatch({type:SET_ERRORS,payload:err.response.data});console.log(err);});};};export var sendEmailVerification=function sendEmailVerification(){return function(dispatch){dispatch({type:LOADING_UI});return new Promise(function(resolve,reject){axios.post(\"/user/email-verification\").then(function(){dispatch({type:CLEAR_ERRORS});dispatch(getUserData());var emailVerificationMsg=\"Email verification instructions sent.\";window.alert(emailVerificationMsg);resolve(true);}).catch(function(err){dispatch({type:SET_ERRORS,payload:err.response.data});console.log(err);reject(false);});});};};export var updateUserPassword=function updateUserPassword(i_UpdateRequest){return function(dispatch){dispatch({type:LOADING_UI});var updateRequest={email:i_UpdateRequest.email,currentPassword:i_UpdateRequest.currentPassword,newPassword:i_UpdateRequest.newPassword,confirmNewPassword:i_UpdateRequest.confirmNewPassword};return new Promise(function(resolve,reject){axios.post(\"/user/update-password\",updateRequest).then(function(){dispatch({type:CLEAR_ERRORS});dispatch(getUserData());var updateSuccessfullMsg=\"Password updated successfully\";window.alert(updateSuccessfullMsg);resolve(true);}).catch(function(err){dispatch({type:SET_ERRORS,payload:err.response.data});console.log(err);reject(false);});});};};export var updateGames=function updateGames(username,gameList){return function(dispatch){dispatch({type:LOADING_USER});var updateRequest={username:username,games:gameList};axios.post(\"user/games/update\",updateRequest).then(function(){dispatch(getUserData());dispatch({type:CLEAR_ERRORS});}).catch(function(err){return console.log(err);});};};export var deleteAccount=function deleteAccount(i_Username){return function(dispatch){dispatch({type:LOADING_USER});axios.post(\"user/delete\",i_Username).then(function(){dispatch(logoutUser());}).catch(function(err){return console.log(err);});};};var setAuthrizationHeader=function setAuthrizationHeader(token){var firebaseIdToken=\"Bearer \".concat(token);localStorage.setItem(\"firebaseIdToken\",firebaseIdToken);axios.defaults.headers.common[\"Authorization\"]=firebaseIdToken;};","map":{"version":3,"sources":["/Users/Idan/Projects/Dev/GitHub/BCKLG/src/redux/actions/userActions.js"],"names":["SET_USER","SET_ERRORS","CLEAR_ERRORS","LOADING_UI","LOADING_USER","SET_UNAUTHENTICATED","axios","loginUser","userData","history","dispatch","type","post","then","result","setAuthrizationHeader","data","token","getUserData","push","catch","err","payload","response","signupUser","newUserData","logoutUser","localStorage","removeItem","defaults","headers","common","get","console","log","sendPasswordResetEmail","i_Email","resetPasswordRequest","email","window","alert","sendEmailVerification","Promise","resolve","reject","emailVerificationMsg","updateUserPassword","i_UpdateRequest","updateRequest","currentPassword","newPassword","confirmNewPassword","updateSuccessfullMsg","updateGames","username","gameList","games","deleteAccount","i_Username","firebaseIdToken","setItem"],"mappings":"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","sourcesContent":["import {\n  SET_USER,\n  SET_ERRORS,\n  CLEAR_ERRORS,\n  LOADING_UI,\n  LOADING_USER,\n  SET_UNAUTHENTICATED\n} from \"../types\";\nimport axios from \"axios\";\n\nexport const loginUser = (userData, history) => dispatch => {\n  dispatch({ type: LOADING_UI });\n  axios\n    .post(\"/login\", userData)\n    .then(result => {\n      setAuthrizationHeader(result.data.token);\n      dispatch(getUserData());\n      dispatch({ type: CLEAR_ERRORS });\n      history.push(\"/my-backlog\");\n    })\n    .catch(err => {\n      dispatch({\n        type: SET_ERRORS,\n        payload: err.response.data\n      });\n    });\n};\n\nexport const signupUser = (newUserData, history) => dispatch => {\n  dispatch({ type: LOADING_UI });\n  axios\n    .post(\"/signup\", newUserData)\n    .then(() => {\n      dispatch(getUserData());\n      dispatch({ type: CLEAR_ERRORS });\n      history.push(\"/login\");\n    })\n    .catch(err => {\n      dispatch({\n        type: SET_ERRORS,\n        payload: err.response.data\n      });\n    });\n};\n\nexport const logoutUser = () => dispatch => {\n  localStorage.removeItem(\"firebaseIdToken\");\n  delete axios.defaults.headers.common[\"Authorization\"];\n  dispatch({ type: SET_UNAUTHENTICATED });\n};\n\nexport const getUserData = () => dispatch => {\n  dispatch({ type: LOADING_USER });\n\n  axios\n    .get(\"/user\")\n    .then(result => {\n      dispatch({\n        type: SET_USER,\n        payload: result.data\n      });\n    })\n    .catch(err => console.log(err));\n};\n\nexport const sendPasswordResetEmail = i_Email => dispatch => {\n  dispatch({ type: LOADING_UI });\n\n  const resetPasswordRequest = {\n    email: i_Email\n  };\n\n  axios\n    .post(\"/user/reset-password\", resetPasswordRequest)\n    .then(() => {\n      dispatch({ type: CLEAR_ERRORS });\n      window.alert(\n        `You should recieve password reset instructions ${resetPasswordRequest.email} shortly`\n      );\n    })\n    .catch(err => {\n      dispatch({\n        type: SET_ERRORS,\n        payload: err.response.data\n      });\n      console.log(err);\n    });\n};\n\nexport const sendEmailVerification = () => dispatch => {\n  dispatch({ type: LOADING_UI });\n\n  return new Promise((resolve, reject) => {\n    axios\n      .post(\"/user/email-verification\")\n      .then(() => {\n        dispatch({ type: CLEAR_ERRORS });\n        dispatch(getUserData());\n        let emailVerificationMsg = \"Email verification instructions sent.\";\n        window.alert(emailVerificationMsg);\n        resolve(true);\n      })\n      .catch(err => {\n        dispatch({\n          type: SET_ERRORS,\n          payload: err.response.data\n        });\n        console.log(err);\n        reject(false);\n      });\n  });\n};\n\nexport const updateUserPassword = i_UpdateRequest => dispatch => {\n  dispatch({ type: LOADING_UI });\n\n  const updateRequest = {\n    email: i_UpdateRequest.email,\n    currentPassword: i_UpdateRequest.currentPassword,\n    newPassword: i_UpdateRequest.newPassword,\n    confirmNewPassword: i_UpdateRequest.confirmNewPassword\n  };\n\n  return new Promise((resolve, reject) => {\n    axios\n      .post(\"/user/update-password\", updateRequest)\n      .then(() => {\n        dispatch({ type: CLEAR_ERRORS });\n        dispatch(getUserData());\n        let updateSuccessfullMsg = \"Password updated successfully\";\n        window.alert(updateSuccessfullMsg);\n        resolve(true);\n      })\n      .catch(err => {\n        dispatch({\n          type: SET_ERRORS,\n          payload: err.response.data\n        });\n        console.log(err);\n        reject(false);\n      });\n  });\n};\n\nexport const updateGames = (username, gameList) => dispatch => {\n  dispatch({ type: LOADING_USER });\n  const updateRequest = {\n    username: username,\n    games: gameList\n  };\n  axios\n    .post(\"user/games/update\", updateRequest)\n    .then(() => {\n      dispatch(getUserData());\n      dispatch({ type: CLEAR_ERRORS });\n    })\n    .catch(err => console.log(err));\n};\n\nexport const deleteAccount = i_Username => dispatch => {\n  dispatch({ type: LOADING_USER });\n  axios\n    .post(\"user/delete\", i_Username)\n    .then(() => {\n      dispatch(logoutUser());\n    })\n    .catch(err => console.log(err));\n};\n\nconst setAuthrizationHeader = token => {\n  const firebaseIdToken = `Bearer ${token}`;\n  localStorage.setItem(\"firebaseIdToken\", firebaseIdToken);\n  axios.defaults.headers.common[\"Authorization\"] = firebaseIdToken;\n};\n"]},"metadata":{},"sourceType":"module"}