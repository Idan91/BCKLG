{"ast":null,"code":"import { SET_USER, SET_ERRORS, CLEAR_ERRORS, LOADING_UI, LOADING_USER, SET_UNAUTHENTICATED } from \"../types\";\nimport axios from \"axios\";\nconst config = {\n  apiKey: \"AIzaSyBk066lHfZjW5w5vgzUAjXfIeVhvyqZiLE\",\n  authDomain: \"bcklg-6b059.firebaseapp.com\",\n  databaseURL: \"https://bcklg-6b059.firebaseio.com\",\n  projectId: \"bcklg-6b059\",\n  storageBucket: \"bcklg-6b059.appspot.com\",\n  messagingSenderId: \"337945780002\",\n  appId: \"1:337945780002:web:d4d3fbc3659c7094a58f7b\",\n  measurementId: \"G-13G073NX99\"\n};\n\nconst firebase = require(\"firebase\");\n\nfirebase.initializeApp(config);\nexport const loginUser = (userData, history) => dispatch => {\n  dispatch({\n    type: LOADING_UI\n  });\n  axios.post(\"/login\", userData).then(result => {\n    setAuthrizationHeader(result.data.token);\n    dispatch(getUserData());\n    dispatch({\n      type: CLEAR_ERRORS\n    });\n    history.push(\"/my-backlog\");\n  }).catch(err => {\n    dispatch({\n      type: SET_ERRORS,\n      payload: err.response.data\n    });\n  });\n};\nexport const signInWithFacebook = history => dispatch => {\n  dispatch({\n    type: LOADING_UI\n  });\n  const provider = new firebase.auth.FacebookAuthProvider();\n  firebase.auth().signInWithPopup(provider).then(result => {\n    const token = result.credential.accessToken;\n    const user = result.user;\n    return {\n      token,\n      user\n    };\n  }).then(data => {\n    const {\n      token,\n      user\n    } = data;\n    setAuthrizationHeader(token);\n    dispatch(getUserData());\n    dispatch({\n      type: CLEAR_ERRORS\n    });\n    history.push(\"/my-backlog\");\n  }).catch(err => {\n    console.error(err);\n  }); // axios\n  //   .get(\"/signin/facebook\")\n  //   .then(result => {\n  //     console.log(\"fb\", result);\n  //     const { token, user } = result;\n  //     setAuthrizationHeader(token);\n  //     dispatch(getUserData());\n  //     dispatch({ type: CLEAR_ERRORS });\n  //     history.push(\"/my-backlog\");\n  //   })\n  //   .catch(err => {\n  //     dispatch({\n  //       type: SET_ERRORS,\n  //       payload: err.response.data\n  //     });\n  //   });\n};\nexport const signupUser = (newUserData, history) => dispatch => {\n  dispatch({\n    type: LOADING_UI\n  });\n  axios.post(\"/signup\", newUserData).then(() => {\n    dispatch(getUserData());\n    dispatch({\n      type: CLEAR_ERRORS\n    });\n    history.push(\"/login\");\n  }).catch(err => {\n    dispatch({\n      type: SET_ERRORS,\n      payload: err.response.data\n    });\n  });\n};\nexport const logoutUser = () => dispatch => {\n  localStorage.removeItem(\"firebaseIdToken\");\n  delete axios.defaults.headers.common[\"Authorization\"];\n  dispatch({\n    type: SET_UNAUTHENTICATED\n  });\n};\nexport const getUserData = () => dispatch => {\n  dispatch({\n    type: LOADING_USER\n  });\n  axios.get(\"/user\").then(result => {\n    dispatch({\n      type: SET_USER,\n      payload: result.data\n    });\n  }).catch(err => console.log(err));\n};\nexport const sendPasswordResetEmail = i_Email => dispatch => {\n  dispatch({\n    type: LOADING_UI\n  });\n  const resetPasswordRequest = {\n    email: i_Email\n  };\n  axios.post(\"/user/reset-password\", resetPasswordRequest).then(() => {\n    dispatch({\n      type: CLEAR_ERRORS\n    });\n    window.alert(`You should recieve password reset instructions ${resetPasswordRequest.email} shortly`);\n  }).catch(err => {\n    dispatch({\n      type: SET_ERRORS,\n      payload: err.response.data\n    });\n    console.log(err);\n  });\n};\nexport const sendEmailVerification = () => dispatch => {\n  dispatch({\n    type: LOADING_UI\n  });\n  return new Promise((resolve, reject) => {\n    axios.post(\"/user/email-verification\").then(() => {\n      dispatch({\n        type: CLEAR_ERRORS\n      });\n      dispatch(getUserData());\n      let emailVerificationMsg = \"Email verification instructions sent.\";\n      window.alert(emailVerificationMsg);\n      resolve(true);\n    }).catch(err => {\n      dispatch({\n        type: SET_ERRORS,\n        payload: err.response.data\n      });\n      console.log(err);\n      reject(false);\n    });\n  });\n};\nexport const updateUserPassword = i_UpdateRequest => dispatch => {\n  dispatch({\n    type: LOADING_UI\n  });\n  const updateRequest = {\n    email: i_UpdateRequest.email,\n    currentPassword: i_UpdateRequest.currentPassword,\n    newPassword: i_UpdateRequest.newPassword,\n    confirmNewPassword: i_UpdateRequest.confirmNewPassword\n  };\n  return new Promise((resolve, reject) => {\n    axios.post(\"/user/update-password\", updateRequest).then(() => {\n      dispatch({\n        type: CLEAR_ERRORS\n      });\n      dispatch(getUserData());\n      let updateSuccessfullMsg = \"Password updated successfully\";\n      window.alert(updateSuccessfullMsg);\n      resolve(true);\n    }).catch(err => {\n      dispatch({\n        type: SET_ERRORS,\n        payload: err.response.data\n      });\n      console.log(err);\n      reject(false);\n    });\n  });\n};\nexport const updateGames = (username, gameList) => dispatch => {\n  dispatch({\n    type: LOADING_USER\n  });\n  const updateRequest = {\n    username: username,\n    games: gameList\n  };\n  axios.post(\"user/games/update\", updateRequest).then(() => {\n    dispatch(getUserData());\n    dispatch({\n      type: CLEAR_ERRORS\n    });\n  }).catch(err => console.log(err));\n};\nexport const deleteAccount = i_Username => dispatch => {\n  dispatch({\n    type: LOADING_USER\n  });\n  axios.post(\"user/delete\", i_Username).then(() => {\n    dispatch(logoutUser());\n  }).catch(err => console.log(err));\n};\n\nconst setAuthrizationHeader = token => {\n  const firebaseIdToken = `Bearer ${token}`;\n  localStorage.setItem(\"firebaseIdToken\", firebaseIdToken);\n  axios.defaults.headers.common[\"Authorization\"] = firebaseIdToken;\n};","map":{"version":3,"sources":["/Users/Idan/Projects/Dev/GitHub/BCKLG/src/redux/actions/userActions.js"],"names":["SET_USER","SET_ERRORS","CLEAR_ERRORS","LOADING_UI","LOADING_USER","SET_UNAUTHENTICATED","axios","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firebase","require","initializeApp","loginUser","userData","history","dispatch","type","post","then","result","setAuthrizationHeader","data","token","getUserData","push","catch","err","payload","response","signInWithFacebook","provider","auth","FacebookAuthProvider","signInWithPopup","credential","accessToken","user","console","error","signupUser","newUserData","logoutUser","localStorage","removeItem","defaults","headers","common","get","log","sendPasswordResetEmail","i_Email","resetPasswordRequest","email","window","alert","sendEmailVerification","Promise","resolve","reject","emailVerificationMsg","updateUserPassword","i_UpdateRequest","updateRequest","currentPassword","newPassword","confirmNewPassword","updateSuccessfullMsg","updateGames","username","gameList","games","deleteAccount","i_Username","firebaseIdToken","setItem"],"mappings":"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","sourcesContent":["import {\n  SET_USER,\n  SET_ERRORS,\n  CLEAR_ERRORS,\n  LOADING_UI,\n  LOADING_USER,\n  SET_UNAUTHENTICATED\n} from \"../types\";\nimport axios from \"axios\";\n\nconst config = {\n  apiKey: \"AIzaSyBk066lHfZjW5w5vgzUAjXfIeVhvyqZiLE\",\n  authDomain: \"bcklg-6b059.firebaseapp.com\",\n  databaseURL: \"https://bcklg-6b059.firebaseio.com\",\n  projectId: \"bcklg-6b059\",\n  storageBucket: \"bcklg-6b059.appspot.com\",\n  messagingSenderId: \"337945780002\",\n  appId: \"1:337945780002:web:d4d3fbc3659c7094a58f7b\",\n  measurementId: \"G-13G073NX99\"\n};\nconst firebase = require(\"firebase\");\nfirebase.initializeApp(config);\n\nexport const loginUser = (userData, history) => dispatch => {\n  dispatch({ type: LOADING_UI });\n  axios\n    .post(\"/login\", userData)\n    .then(result => {\n      setAuthrizationHeader(result.data.token);\n      dispatch(getUserData());\n      dispatch({ type: CLEAR_ERRORS });\n      history.push(\"/my-backlog\");\n    })\n    .catch(err => {\n      dispatch({\n        type: SET_ERRORS,\n        payload: err.response.data\n      });\n    });\n};\n\nexport const signInWithFacebook = history => dispatch => {\n  dispatch({ type: LOADING_UI });\n\n  const provider = new firebase.auth.FacebookAuthProvider();\n\n  firebase\n    .auth()\n    .signInWithPopup(provider)\n    .then(result => {\n      const token = result.credential.accessToken;\n      const user = result.user;\n\n      return { token, user };\n    })\n    .then(data => {\n      const { token, user } = data;\n\n      setAuthrizationHeader(token);\n      dispatch(getUserData());\n      dispatch({ type: CLEAR_ERRORS });\n      history.push(\"/my-backlog\");\n    })\n    .catch(err => {\n      console.error(err);\n    });\n\n  // axios\n  //   .get(\"/signin/facebook\")\n  //   .then(result => {\n  //     console.log(\"fb\", result);\n  //     const { token, user } = result;\n  //     setAuthrizationHeader(token);\n  //     dispatch(getUserData());\n  //     dispatch({ type: CLEAR_ERRORS });\n  //     history.push(\"/my-backlog\");\n  //   })\n  //   .catch(err => {\n  //     dispatch({\n  //       type: SET_ERRORS,\n  //       payload: err.response.data\n  //     });\n  //   });\n};\n\nexport const signupUser = (newUserData, history) => dispatch => {\n  dispatch({ type: LOADING_UI });\n  axios\n    .post(\"/signup\", newUserData)\n    .then(() => {\n      dispatch(getUserData());\n      dispatch({ type: CLEAR_ERRORS });\n      history.push(\"/login\");\n    })\n    .catch(err => {\n      dispatch({\n        type: SET_ERRORS,\n        payload: err.response.data\n      });\n    });\n};\n\nexport const logoutUser = () => dispatch => {\n  localStorage.removeItem(\"firebaseIdToken\");\n  delete axios.defaults.headers.common[\"Authorization\"];\n  dispatch({ type: SET_UNAUTHENTICATED });\n};\n\nexport const getUserData = () => dispatch => {\n  dispatch({ type: LOADING_USER });\n\n  axios\n    .get(\"/user\")\n    .then(result => {\n      dispatch({\n        type: SET_USER,\n        payload: result.data\n      });\n    })\n    .catch(err => console.log(err));\n};\n\nexport const sendPasswordResetEmail = i_Email => dispatch => {\n  dispatch({ type: LOADING_UI });\n\n  const resetPasswordRequest = {\n    email: i_Email\n  };\n\n  axios\n    .post(\"/user/reset-password\", resetPasswordRequest)\n    .then(() => {\n      dispatch({ type: CLEAR_ERRORS });\n      window.alert(\n        `You should recieve password reset instructions ${resetPasswordRequest.email} shortly`\n      );\n    })\n    .catch(err => {\n      dispatch({\n        type: SET_ERRORS,\n        payload: err.response.data\n      });\n      console.log(err);\n    });\n};\n\nexport const sendEmailVerification = () => dispatch => {\n  dispatch({ type: LOADING_UI });\n\n  return new Promise((resolve, reject) => {\n    axios\n      .post(\"/user/email-verification\")\n      .then(() => {\n        dispatch({ type: CLEAR_ERRORS });\n        dispatch(getUserData());\n        let emailVerificationMsg = \"Email verification instructions sent.\";\n        window.alert(emailVerificationMsg);\n        resolve(true);\n      })\n      .catch(err => {\n        dispatch({\n          type: SET_ERRORS,\n          payload: err.response.data\n        });\n        console.log(err);\n        reject(false);\n      });\n  });\n};\n\nexport const updateUserPassword = i_UpdateRequest => dispatch => {\n  dispatch({ type: LOADING_UI });\n\n  const updateRequest = {\n    email: i_UpdateRequest.email,\n    currentPassword: i_UpdateRequest.currentPassword,\n    newPassword: i_UpdateRequest.newPassword,\n    confirmNewPassword: i_UpdateRequest.confirmNewPassword\n  };\n\n  return new Promise((resolve, reject) => {\n    axios\n      .post(\"/user/update-password\", updateRequest)\n      .then(() => {\n        dispatch({ type: CLEAR_ERRORS });\n        dispatch(getUserData());\n        let updateSuccessfullMsg = \"Password updated successfully\";\n        window.alert(updateSuccessfullMsg);\n        resolve(true);\n      })\n      .catch(err => {\n        dispatch({\n          type: SET_ERRORS,\n          payload: err.response.data\n        });\n        console.log(err);\n        reject(false);\n      });\n  });\n};\n\nexport const updateGames = (username, gameList) => dispatch => {\n  dispatch({ type: LOADING_USER });\n  const updateRequest = {\n    username: username,\n    games: gameList\n  };\n  axios\n    .post(\"user/games/update\", updateRequest)\n    .then(() => {\n      dispatch(getUserData());\n      dispatch({ type: CLEAR_ERRORS });\n    })\n    .catch(err => console.log(err));\n};\n\nexport const deleteAccount = i_Username => dispatch => {\n  dispatch({ type: LOADING_USER });\n  axios\n    .post(\"user/delete\", i_Username)\n    .then(() => {\n      dispatch(logoutUser());\n    })\n    .catch(err => console.log(err));\n};\n\nconst setAuthrizationHeader = token => {\n  const firebaseIdToken = `Bearer ${token}`;\n  localStorage.setItem(\"firebaseIdToken\", firebaseIdToken);\n  axios.defaults.headers.common[\"Authorization\"] = firebaseIdToken;\n};\n"]},"metadata":{},"sourceType":"module"}