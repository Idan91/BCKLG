{"ast":null,"code":"import _defineProperty from\"/Users/Idan/Projects/Dev/GitHub/BCKLG/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/Idan/Projects/Dev/GitHub/BCKLG/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Idan/Projects/Dev/GitHub/BCKLG/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/Idan/Projects/Dev/GitHub/BCKLG/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/Idan/Projects/Dev/GitHub/BCKLG/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/Idan/Projects/Dev/GitHub/BCKLG/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{Link}from\"react-router-dom\";import Logo from\"../UI Elements/Logo\";// Redux\nimport{connect}from\"react-redux\";import{loginUser,sendPasswordResetEmail}from\"../../redux/actions/userActions\";var login=/*#__PURE__*/function(_Component){_inherits(login,_Component);function login(){var _getPrototypeOf2;var _this;_classCallCheck(this,login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(login)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={email:\"\",emailForgot:\"\",password:\"\",errors:{},forgotVisible:false};_this.handleInputChange=function(event){_this.setState(_defineProperty({},event.target.name,event.target.value));};_this.handleKeyDown=function(event){if(event.keyCode===13){_this.handleSubmit(event);}};_this.handleSubmit=function(event){event.preventDefault();var userData={email:_this.state.email,password:_this.state.password};_this.props.loginUser(userData,_this.props.history);};_this.handleForgotPassword=function(){_this.setState({forgotVisible:!_this.state.forgotVisible});};_this.handleResetEmail=function(event){event.preventDefault();var email=_this.state.emailForgot;try{_this.props.sendPasswordResetEmail(email);}catch(err){alert(err);console.log(err);}};_this.renderForgotPassword=function(i_Errors){var loading=_this.props.UI.loading;return React.createElement(React.Fragment,null,React.createElement(\"div\",{className:\"login-container\"},React.createElement(\"h2\",{className:\"sub-page-title\"},\"Forgot Password\"),React.createElement(\"br\",null),React.createElement(\"div\",{className:\"form-description-container\"},React.createElement(\"p\",{className:\"form-description\"},\"Please enter your email and we'll send you instructions on how to reset your password\")),React.createElement(\"form\",{onSubmit:_this.handleResetEmail,className:\"form login-form\"},_this.state.emailForgot!==\"\"&&React.createElement(\"p\",{className:\"field-label\"},\"Email\"),React.createElement(\"input\",{type:\"text\",className:\"userdata-input\",name:\"emailForgot\",placeholder:\"Email\",value:_this.state.emailForgot,onChange:_this.handleInputChange,onKeyDown:_this.handleKeyDown}),i_Errors.emailForgot&&React.createElement(\"p\",{className:\"helper-text\"},i_Errors.emailForgot),React.createElement(\"br\",null),React.createElement(\"div\",{className:\"loader-container\"},loading&&React.createElement(\"div\",{className:\"loader\"})),React.createElement(\"br\",null),React.createElement(\"button\",{className:\"btn btn-submit link\"},\"Submit\")),i_Errors.general&&React.createElement(React.Fragment,null,React.createElement(\"p\",{className:\"error-msg\"},i_Errors.general),React.createElement(\"br\",null)),React.createElement(\"br\",null),React.createElement(\"button\",{className:\"btn btn-sml btn-gray link\",onClick:_this.handleForgotPassword},\"Cancel\")));};_this.renderLoginForm=function(i_Errors,i_Loading){return React.createElement(\"div\",{className:\"login-container\"},React.createElement(Logo,{currentPage:\"Login\",logoType:\"vert\"}),React.createElement(\"br\",null),React.createElement(\"form\",{onSubmit:_this.handleSubmit,className:\"form login-form\"},_this.state.email!==\"\"&&React.createElement(\"p\",{className:\"field-label\"},\"Email\"),React.createElement(\"input\",{type:\"text\",className:\"userdata-input\",name:\"email\",placeholder:\"Email\",value:_this.state.email,onChange:_this.handleInputChange,onKeyDown:_this.handleKeyDown}),React.createElement(\"br\",null),i_Errors.email&&React.createElement(React.Fragment,null,React.createElement(\"p\",{className:\"helper-text\"},i_Errors.email),React.createElement(\"br\",null)),_this.state.password!==\"\"&&React.createElement(\"p\",{className:\"field-label\"},\"Password\"),React.createElement(\"input\",{type:\"password\",className:\"userdata-input\",name:\"password\",placeholder:\"Password\",value:_this.state.password,onChange:_this.handleInputChange,onKeyDown:_this.handleKeyDown}),i_Errors.password&&React.createElement(React.Fragment,null,React.createElement(\"p\",{className:\"helper-text\"},i_Errors.password),React.createElement(\"br\",null)),React.createElement(\"br\",null),i_Loading&&React.createElement(React.Fragment,null,React.createElement(\"div\",{className:\"loader-container\"},React.createElement(\"div\",{className:\"loader\"}))),React.createElement(\"br\",null),React.createElement(\"button\",{className:\"btn btn-submit link\"},\"Login\"),i_Errors.general&&React.createElement(\"p\",{className:\"error-msg\"},i_Errors.general)),React.createElement(\"button\",{className:\"btn btn-sml btn-gray link\",onClick:_this.handleForgotPassword},\"Forgot Password\"),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"div\",{className:\"body-question\"},React.createElement(\"span\",null,\"Don't have an account? \"),\" \",React.createElement(Link,{to:\"/sign-up\"},\"Sign up here\")));};_this.renderLoginPage=function(){var errors=_this.state.errors;var loading=_this.props.UI.loading;return React.createElement(React.Fragment,null,React.createElement(\"div\",{className:\"page-container\"},_this.state.forgotVisible?_this.renderForgotPassword(errors):_this.renderLoginForm(errors,loading)));};return _this;}_createClass(login,[{key:\"UNSAFE_componentWillReceiveProps\",value:function UNSAFE_componentWillReceiveProps(nextProps){if(nextProps.UI.errors){this.setState({errors:nextProps.UI.errors});}}},{key:\"render\",value:function render(){return this.renderLoginPage();}}]);return login;}(Component);var mapStateToProps=function mapStateToProps(state){return{user:state.user,UI:state.UI};};var mapActionsToProps={loginUser:loginUser,sendPasswordResetEmail:sendPasswordResetEmail};export default connect(mapStateToProps,mapActionsToProps)(login);","map":{"version":3,"sources":["/Users/Idan/Projects/Dev/GitHub/BCKLG/src/components/Home Pages/login.js"],"names":["React","Component","Link","Logo","connect","loginUser","sendPasswordResetEmail","login","state","email","emailForgot","password","errors","forgotVisible","handleInputChange","event","setState","target","name","value","handleKeyDown","keyCode","handleSubmit","preventDefault","userData","props","history","handleForgotPassword","handleResetEmail","err","alert","console","log","renderForgotPassword","i_Errors","loading","UI","general","renderLoginForm","i_Loading","renderLoginPage","nextProps","mapStateToProps","user","mapActionsToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Logo from \"../UI Elements/Logo\";\nimport PropTypes from \"prop-types\";\n// Redux\nimport { connect } from \"react-redux\";\nimport {\n  loginUser,\n  sendPasswordResetEmail\n} from \"../../redux/actions/userActions\";\n\nclass login extends Component {\n  state = {\n    email: \"\",\n    emailForgot: \"\",\n    password: \"\",\n    errors: {},\n    forgotVisible: false\n  };\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.UI.errors) {\n      this.setState({\n        errors: nextProps.UI.errors\n      });\n    }\n  }\n\n  handleInputChange = event => {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  };\n\n  handleKeyDown = event => {\n    if (event.keyCode === 13) {\n      this.handleSubmit(event);\n    }\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n    const userData = {\n      email: this.state.email,\n      password: this.state.password\n    };\n    this.props.loginUser(userData, this.props.history);\n  };\n\n  handleForgotPassword = () => {\n    this.setState({\n      forgotVisible: !this.state.forgotVisible\n    });\n  };\n\n  handleResetEmail = event => {\n    event.preventDefault();\n    const email = this.state.emailForgot;\n\n    try {\n      this.props.sendPasswordResetEmail(email);\n    } catch (err) {\n      alert(err);\n      console.log(err);\n    }\n  };\n\n  renderForgotPassword = i_Errors => {\n    const {\n      UI: { loading }\n    } = this.props;\n\n    return (\n      <React.Fragment>\n        <div className=\"login-container\">\n          <h2 className=\"sub-page-title\">Forgot Password</h2>\n          <br />\n          <div className=\"form-description-container\">\n            <p className=\"form-description\">\n              Please enter your email and we'll send you instructions on how to\n              reset your password\n            </p>\n          </div>\n          <form onSubmit={this.handleResetEmail} className=\"form login-form\">\n            {this.state.emailForgot !== \"\" && (\n              <p className=\"field-label\">Email</p>\n            )}\n            <input\n              type=\"text\"\n              className=\"userdata-input\"\n              name=\"emailForgot\"\n              placeholder=\"Email\"\n              value={this.state.emailForgot}\n              onChange={this.handleInputChange}\n              onKeyDown={this.handleKeyDown}\n            ></input>\n            {i_Errors.emailForgot && (\n              <p className=\"helper-text\">{i_Errors.emailForgot}</p>\n            )}\n            <br />\n            <div className=\"loader-container\">\n              {loading && <div className=\"loader\" />}\n            </div>\n            <br />\n            <button className=\"btn btn-submit link\">Submit</button>\n          </form>\n          {i_Errors.general && (\n            <React.Fragment>\n              <p className=\"error-msg\">{i_Errors.general}</p>\n              <br />\n            </React.Fragment>\n          )}\n          <br />\n          <button\n            className=\"btn btn-sml btn-gray link\"\n            onClick={this.handleForgotPassword}\n          >\n            Cancel\n          </button>\n        </div>\n      </React.Fragment>\n    );\n  };\n\n  renderLoginForm = (i_Errors, i_Loading) => {\n    return (\n      <div className=\"login-container\">\n        <Logo currentPage=\"Login\" logoType=\"vert\" />\n        <br />\n        <form onSubmit={this.handleSubmit} className=\"form login-form\">\n          {this.state.email !== \"\" && <p className=\"field-label\">Email</p>}\n          <input\n            type=\"text\"\n            className=\"userdata-input\"\n            name=\"email\"\n            placeholder=\"Email\"\n            value={this.state.email}\n            onChange={this.handleInputChange}\n            onKeyDown={this.handleKeyDown}\n          ></input>\n          <br />\n          {i_Errors.email && (\n            <React.Fragment>\n              <p className=\"helper-text\">{i_Errors.email}</p>\n              <br />\n            </React.Fragment>\n          )}\n          {this.state.password !== \"\" && (\n            <p className=\"field-label\">Password</p>\n          )}\n          <input\n            type=\"password\"\n            className=\"userdata-input\"\n            name=\"password\"\n            placeholder=\"Password\"\n            value={this.state.password}\n            onChange={this.handleInputChange}\n            onKeyDown={this.handleKeyDown}\n          ></input>\n          {i_Errors.password && (\n            <React.Fragment>\n              <p className=\"helper-text\">{i_Errors.password}</p>\n              <br />\n            </React.Fragment>\n          )}\n          <br />\n          {i_Loading && (\n            <React.Fragment>\n              <div className=\"loader-container\">\n                <div className=\"loader\" />\n              </div>\n            </React.Fragment>\n          )}\n          <br />\n          <button className=\"btn btn-submit link\">Login</button>\n          {i_Errors.general && <p className=\"error-msg\">{i_Errors.general}</p>}\n        </form>\n        <button\n          className=\"btn btn-sml btn-gray link\"\n          onClick={this.handleForgotPassword}\n        >\n          Forgot Password\n        </button>\n        <br />\n        <br />\n        <div className=\"body-question\">\n          <span>Don't have an account? </span>{\" \"}\n          <Link to=\"/sign-up\">Sign up here</Link>\n        </div>\n      </div>\n    );\n  };\n\n  renderLoginPage = () => {\n    const { errors } = this.state;\n    const {\n      UI: { loading }\n    } = this.props;\n\n    return (\n      <React.Fragment>\n        <div className=\"page-container\">\n          {this.state.forgotVisible\n            ? this.renderForgotPassword(errors)\n            : this.renderLoginForm(errors, loading)}\n        </div>\n      </React.Fragment>\n    );\n  };\n\n  render() {\n    return this.renderLoginPage();\n  }\n}\n\nlogin.propTypes = {\n  loginUser: PropTypes.func.isRequired,\n  sendPasswordResetEmail: PropTypes.func.isRequired,\n  user: PropTypes.object.isRequired,\n  UI: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  user: state.user,\n  UI: state.UI\n});\n\nconst mapActionsToProps = {\n  loginUser,\n  sendPasswordResetEmail\n};\n\nexport default connect(mapStateToProps, mapActionsToProps)(login);\n"]},"metadata":{},"sourceType":"module"}