(this.webpackJsonpBCKLG=this.webpackJsonpBCKLG||[]).push([[0],{100:function(e,a,t){e.exports=t.p+"static/media/BCKLG_Logo_vertical.a9e9e193.svg"},101:function(e,a,t){e.exports=t.p+"static/media/google_G.713f5b25.svg"},103:function(e,a,t){e.exports=t(254)},108:function(e,a,t){},254:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(42),l=t.n(s),o=(t(108),t(1)),c=t(2),i=t(6),m=t(5),u=t(7),d=t(9),p=t(23),h=t(8),g=t(27),f=t(97),E=t(24),b={authenticated:!1,loading:!1,credentials:{},games:[]},v={loading:!1,errors:null},y=[f.a],N=Object(g.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_AUTHENTICATED":return Object(E.a)({},e,{authenticated:!0});case"SET_UNAUTHENTICATED":return b;case"SET_USER":return Object(E.a)({authenticated:!0,loading:!1},a.payload);case"LOADING_USER":return Object(E.a)({},e,{loading:!0});default:return e}},UI:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_ERRORS":return Object(E.a)({},e,{loading:!1,errors:a.payload});case"CLEAR_ERRORS":return Object(E.a)({},e,{loading:!1,errors:null});case"LOADING_UI":return Object(E.a)({},e,{loading:!0});default:return e}}}),w=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||g.d,C=Object(g.e)(N,{},w(g.a.apply(void 0,y))),k=t(13),S=t.n(k),P=function(){return function(e){localStorage.removeItem("firebaseIdToken"),delete S.a.defaults.headers.common.Authorization,e({type:"SET_UNAUTHENTICATED"})}},O=function(){return function(e){e({type:"LOADING_USER"}),S.a.get("/user").then((function(a){e({type:"SET_USER",payload:a.data})})).catch((function(e){return console.log(e)}))}},F=function(e,a){return function(t){t({type:"LOADING_USER"});var n={username:e,games:a};S.a.post("user/games/update",n).then((function(){t(O()),t({type:"CLEAR_ERRORS"})})).catch((function(e){return console.log(e)}))}},G=function(e){var a="Bearer ".concat(e);localStorage.setItem("firebaseIdToken",a),S.a.defaults.headers.common.Authorization=a},j=t(102),A=t(10),I=function(e){var a=e.component,t=e.authenticated,n=Object(j.a)(e,["component","authenticated"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return!0===t?r.a.createElement(p.a,{to:"/my-backlog"}):r.a.createElement(a,e)}}))};I.protoTypes={user:t.n(A).a.object.isRequired};var D=Object(h.b)((function(e){return{authenticated:e.user.authenticated}}))(I),R=t(99),U=t.n(R);var x=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item",key:e.value,onClick:e.handleClick},r.a.createElement(d.c,{to:e.link,className:e.defaultClasses,activeClassName:e.selectedClasses},e.value)))},L=t(65),T=t.n(L),B=t(100),V=t.n(B),_=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(t=Object(i.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(s)))).state={logoSrc:T.a,logoClasses:"logo-img",navClasses:"logo-img logo-img-link link logo-nav",vertClasses:"logo-login logo-img logo-vert",inlineClasses:"logo-img logo-inline"},t.defineLogo=function(e){"Login"===e?t.setState({logoSrc:V.a}):t.setState({logoSrc:T.a}),t.defineLogoClasses(t.props.logoType,e)},t.defineLogoClasses=function(e,a){if("nav"===e)t.setState({logoClasses:t.state.navClasses});else if("vert"===e)t.setState({logoClasses:t.state.vertClasses});else if("inline"===e)if("Join"===a){var n="".concat(t.state.inlineClasses," logo-join");t.setState({logoClasses:n})}else t.setState({logoClasses:t.state.inlineClasses})},t.renderLogo=function(e){return"home"===e?r.a.createElement(d.b,{to:"/"},r.a.createElement("img",{className:t.state.logoClasses,src:t.state.logoSrc,alt:""})):"bcklg"===e?r.a.createElement(d.b,{to:"/my-backlog"},r.a.createElement("img",{className:t.state.logoClasses,src:t.state.logoSrc,alt:""})):r.a.createElement("img",{className:t.state.logoClasses,src:t.state.logoSrc,alt:""})},t}return Object(u.a)(a,e),Object(c.a)(a,[{key:"componentDidMount",value:function(){void 0!==this.props.currentPage?this.defineLogo(this.props.currentPage):void 0!==this.props.navbarType&&this.defineLogo(this.props.navbarType)}},{key:"render",value:function(){return this.renderLogo(this.props.navbarType)}}]),a}(n.Component),M=function(e){var a=e.user,t=a.credentials,n=t.username,r=t.games,s=t.emailVerified,l=a.loading,o=a.authenticated;return{user:e.user,username:n,games:r,emailVerified:s,loading:l,authenticated:o}},K=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(t=Object(i.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(s)))).state={defaultClasses:"nav-link link",selectedClasses:"btn nav-selected",homePaths:["/"],bcklgPaths:["/account"],navbarType:null,popupVisible:!1},t.convertPageName=function(e){var a="",t=e.split(" ");if(1===t.length)a=t[0].toLowerCase();else for(var n=0;n<t.length;n++)n===t.length-1?a+=t[n].toLowerCase():a+=t[n].toLowerCase()+"-";return a},t.getNavbarType=function(){var e=null,a=t.props.location.pathname;return t.state.homePaths.forEach((function(t){t===a&&(e="home")})),null===e&&t.state.bcklgPaths.forEach((function(t){t===a&&(e="bcklg")})),e},t.handleNavItemClick=function(){t.state.popupVisible&&t.setState({popupVisible:!1})},t.drawNabBar=function(){var e=[],a=r.a.createElement(x,{handleClick:t.handleNavItemClick}),n=t.getNavbarType();return null!==n?(("home"===n?t.props.homeNav:t.props.bcklgNav).forEach((function(n,s){e.push(r.a.createElement(r.a.Fragment,{key:s},r.a.cloneElement(a,{defaultClasses:t.state.defaultClasses,selectedClasses:t.state.selectedClasses,link:t.convertPageName(n),key:n,value:n})))})),e):r.a.createElement("p",null,"Error drawing navbar")},t.setNavPaths=function(){var e=t.mapNavPathsfromArray(t.state.homePaths,t.props.homeNav),a=t.mapNavPathsfromArray(t.state.bcklgPaths,t.props.bcklgNav);t.setState({homePaths:e,bcklgPaths:a})},t.mapNavPathsfromArray=function(e,a){var n=a.map((function(e){return"/".concat(t.convertPageName(e))}));return e.length>0&&e.forEach((function(e){n.unshift(e)})),n},t.handleLogout=function(){if(window.confirm("Are you sure you want to logout?"))try{t.props.logoutUser(),t.setState({popupVisible:!1}),t.props.history.push("/")}catch(e){console.log(e)}},t.renderUserPopup=function(){if(t.state.popupVisible)return r.a.createElement("div",{className:"user-pop-up"},r.a.createElement("ul",null,r.a.createElement(d.b,{to:"/account"},r.a.createElement("button",{className:"btn nav-link link btn-pop-up",onClick:t.handleNavItemClick},"Account")),r.a.createElement("button",{className:"btn nav-link link btn-pop-up",onClick:t.handleLogout},"Logout")))},t.handleUserButtonClick=function(){t.setState({popupVisible:!t.state.popupVisible})},t.drawUserButton=function(e){if("home"!==t.getNavbarType()&&void 0!==e)return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{key:"username",className:"btn username nav-link link",onClick:t.handleUserButtonClick}," ",e),t.renderUserPopup())},t.renderLogo=function(){var e=t.getNavbarType();return r.a.createElement(_,{navbarType:e,logoType:"nav"})},t}return Object(u.a)(a,e),Object(c.a)(a,[{key:"componentDidMount",value:function(){this.setState({popupVisible:!1}),this.setNavPaths()}},{key:"render",value:function(){var e=M(this.props).username;return r.a.createElement("div",{className:"navbar flex-row"},r.a.createElement("nav",{className:"nav"},r.a.createElement("div",{className:"nav-logo"},this.renderLogo()),r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement("ul",{className:"nav-list"},r.a.createElement("div",{className:"nav-items-wrapper"},this.drawNabBar(),r.a.createElement("div",{className:"username-container"},this.drawUserButton(e)))))))}}]),a}(n.Component),W={logoutUser:P},H=Object(p.g)(Object(h.b)((function(e){return{user:e.user}}),W)(K));var q=function(){return r.a.createElement("footer",null,r.a.createElement("div",{className:"footer-text-container"},r.a.createElement("div",{className:"footer-separator"},"-"),"All rights reserved to Idan Ram \xa9 2020 |"," Powered by RAWG & RAWger"))},J=t(3),Y=t.n(J),z=t(12),X=function(e){if(/([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))/.test(e)){var a=e.split("-"),t=a[0],n=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"][parseInt(a[1])-1],r=a[2];return"".concat(n," ").concat(r,", ").concat(t)}},$=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(t=Object(i.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(s)))).state={defaultClasses:"game-card",homeClasses:"game-card-home game-card-add-game",addGameClasses:"game-card game-card-add-game",addedStyle:"",preAnimationStyle:"card-pre-entrance",animationStyle:"card-entrance"},t._isMounted=!1,t.renderGameDetails=function(){var e="",a="",n=!0,s=new Date(t.props.game.released),l=new Date;return(s.getTime()>=l.getTime()||null===t.props.game.released)&&(n=!1),"My Backlog"===t.props.currentPage&&(e=r.a.createElement("div",{className:"game-detail game-detail-line"},r.a.createElement("p",{className:"game-detail game-detail-label"},"Status:"),r.a.createElement("p",{className:"game-detail game-detail-value"},t.props.game.status)),a=r.a.createElement("div",{className:"platform ".concat(t.props.game.platform.slug)},r.a.createElement("p",{className:"platform-name"},t.props.game.platform.name))),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"game-detail-container"},r.a.createElement("div",{className:"game-detail-line"},r.a.createElement("p",{className:"game-detail game-detail-label"},"Rating:"),r.a.createElement("p",{className:"game-detail game-detail-value"},n?"".concat(t.props.game.rating," / 5"):"TBD")),r.a.createElement("br",null),r.a.createElement("div",{className:"game-detail-line"},r.a.createElement("p",{className:"game-detail game-detail-label"},"Release Date:"),r.a.createElement("p",{className:"game-detail game-detail-value"},null===t.props.game.released?"TBD":X(t.props.game.released))),r.a.createElement("br",null),e,r.a.createElement("br",null)),a)},t}return Object(u.a)(a,e),Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this._isMounted&&"My Backlog"===this.props.currentPage&&this.props.animate&&(this.setState({addedStyle:this.state.preAnimationStyle}),setTimeout((function(){e.setState({addedStyle:e.state.animationStyle}),e._isMounted=!1,setTimeout((function(){e.setState({addedStyle:""})}),800)}),75*this.props.delay),this.props.numOfGames===this.props.delay&&this.props.handleStopStartupAnimation())}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,console.log(this.props.animate)}},{key:"render",value:function(){var e;return e="Home"===this.props.currentPage?this.state.homeClasses:"Add Game"===this.props.currentPage?this.state.addGameClasses:this.state.defaultClasses,"Game Focus"!==this.props.parentComponent&&"Home"!==this.props.currentPage&&(e+=" link"),r.a.createElement("div",{key:this.props.game.name,className:"".concat(e," ").concat(this.state.addedStyle),onClick:this.props.handleClick,game:this.props.game,name:this.props.game.name,slug:this.props.game.slug},r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{className:"game-img",src:this.props.game.background_image,alt:this.props.game.name})),r.a.createElement("div",{className:"title-container"},r.a.createElement("p",{className:"game-title"},this.props.game.name)),this.renderGameDetails())}}]),a}(n.Component),Q=(t(33),function(){var e=Object(z.a)(Y.a.mark((function e(a){var n,r,s,l;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t(33),e.next=3,n({});case 3:return r=e.sent,s=r.games,e.next=7,s.get(a).then((function(e){return e.get()})).then((function(e){return e.raw}));case 7:return l=e.sent,e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),Z=function(){var e=Object(z.a)(Y.a.mark((function e(a){var n,r,s,l,o;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t(33),e.next=3,n({});case 3:return r=e.sent,s=r.games,e.prev=5,e.next=8,s.search(a).then((function(e){return e.raw()})).then((function(e){return e}));case 8:return l=e.sent,o=l.filter((function(e){return e.rating>0})),e.abrupt("return",o);case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",e.t0.toString());case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(a){return e.apply(this,arguments)}}(),ee=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(t=Object(i.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(s)))).state={game:"death-stranding",gameCard:""},t.renderGameCard=function(){var e=Object(z.a)(Y.a.mark((function e(a){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{Q(a).then((function(e){t.setState({gameCard:r.a.createElement($,{game:e,currentPage:"Home",key:e.name})})}))}catch(n){console.log(n)}case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),t.renderHomeContent=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"home-showcase-bg"}),r.a.createElement("div",{className:"home-page"},r.a.createElement("div",{className:"home-container"},r.a.createElement("div",{className:"home-caption-container"},r.a.createElement("h1",{className:"home-caption"},"Conquer \nYour Backlog"),r.a.createElement("h2",{className:"home-sub-caption"},"No game left behind!")),r.a.createElement("div",{className:"down-arrow-container"},r.a.createElement("div",{className:"down-arrows"},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null)))),r.a.createElement("div",{className:"home-desc desc-1"},r.a.createElement("div",{className:"desc-img"}),r.a.createElement("div",{className:"home-desc-container"},r.a.createElement("div",{className:"desc-content"},r.a.createElement("h1",{className:"desc-title desc-title-top"},"Track & Beat all the games in your library"),r.a.createElement("div",{className:"desc-text-content"})))),r.a.createElement("div",{className:"home-desc desc-violet home-desc-lg "},r.a.createElement("div",{className:"home-desc-container"},r.a.createElement("div",{className:"desc-content"},r.a.createElement("br",null),r.a.createElement("div",{className:"center-container"},r.a.createElement("h1",{className:"our-platform-title"},"Our Platform"),r.a.createElement("br",null)),r.a.createElement("div",{className:"spread-container"},r.a.createElement("br",null),r.a.createElement("div",{className:"spread-container-child"},r.a.createElement("i",{className:"far fa-clock fa-7x"}),r.a.createElement("br",null),r.a.createElement("h2",{className:"our-platform-section-title"},"Manage your gaming time more effeciently")),r.a.createElement("div",{className:"spread-container-child"},r.a.createElement("i",{className:"fas fa-gamepad fa-7x"}),r.a.createElement("br",null),r.a.createElement("h2",{className:"our-platform-section-title"},"Stay up to date and add the latest and greatest games")),r.a.createElement("div",{className:"spread-container-child"},r.a.createElement("i",{className:"fas fa-dollar-sign fa-7x"}),r.a.createElement("br",null),r.a.createElement("h2",{className:"our-platform-section-title"},"Don't let your hard-earned money go to waste")))))),r.a.createElement("div",{className:"home-desc desc-orange desc-2"},r.a.createElement("div",{className:"home-desc-container"},r.a.createElement("div",{className:"desc-content"},r.a.createElement("div",{className:"desc-text-content"},r.a.createElement("h1",{className:"desc-title"},"Card view"),r.a.createElement("p",{className:"desc-body"},"A clean and intuitive card view letting you comfortably manage your backlog.")),r.a.createElement("div",{className:"card-container-home card-container-home-left"},t.state.gameCard)))),r.a.createElement("div",{className:"home-desc desc-join"},r.a.createElement("div",{className:"home-desc-container"},r.a.createElement("div",{className:"desc-content desc-join-content"},r.a.createElement("div",{className:"desc-text-content"},r.a.createElement("div",{className:"inline"},r.a.createElement("span",{className:"desc-title inline"},"Join "),r.a.createElement(_,{currentPage:"Join",logoType:"inline"}),r.a.createElement("span",{className:"desc-title inline"}," now!")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(d.b,{to:"/sign-up"},r.a.createElement("button",{className:"btn btn-home-page link"},"Sign Up")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"body-question-home"},r.a.createElement("span",{className:""},"Already a member? ")," ",r.a.createElement(d.b,{to:"/login"},"Log in here"))))))))},t}return Object(u.a)(a,e),Object(c.a)(a,[{key:"componentDidMount",value:function(){this.renderGameCard(this.state.game)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.renderHomeContent())}}]),a}(n.Component),ae=t(22),te=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(i.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(r)))).state={username:"",email:"",password:"",confirmPassword:"",loading:!1,errors:{}},t.handleInputChange=function(e){t.setState(Object(ae.a)({},e.target.name,e.target.value))},t.handleKeyDown=function(e){13===e.keyCode&&t.handleSubmit(e)},t.handleSubmit=function(e){e.preventDefault(),t.setState({loading:!0});var a={username:t.state.username,email:t.state.email,password:t.state.password,confirmPassword:t.state.confirmPassword};t.props.signupUser(a,t.props.history)},t}return Object(u.a)(a,e),Object(c.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors})}},{key:"render",value:function(){var e=this.state.errors,a=this.props.UI.loading;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"signup-container"},r.a.createElement(_,{currentPage:"Login",logoType:"vert"}),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:this.handleSubmit,className:"form login-form"},""!==this.state.username&&r.a.createElement("p",{className:"field-label"},"Username"),r.a.createElement("input",{type:"text",className:"userdata-input",name:"username",placeholder:"Username",value:this.state.username,onChange:this.handleInputChange,onKeyDown:this.handleKeyDown}),r.a.createElement("br",null),e.username&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"helper-text"},e.username),r.a.createElement("br",null)),""!==this.state.email&&r.a.createElement("p",{className:"field-label"},"Email"),r.a.createElement("input",{type:"text",className:"userdata-input",name:"email",placeholder:"Email",value:this.state.email,onChange:this.handleInputChange,onKeyDown:this.handleKeyDown}),r.a.createElement("br",null),e.email&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"helper-text"},e.email),r.a.createElement("br",null)),""!==this.state.password&&r.a.createElement("p",{className:"field-label"},"Password"),r.a.createElement("input",{type:"password",className:"userdata-input",name:"password",placeholder:"Password",value:this.state.password,onChange:this.handleInputChange,onKeyDown:this.handleKeyDown}),r.a.createElement("br",null),e.password&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"helper-text"},e.password),r.a.createElement("br",null)),""!==this.state.confirmPassword&&r.a.createElement("p",{className:"field-label"},"Confirm Password"),r.a.createElement("input",{type:"password",className:"userdata-input",name:"confirmPassword",placeholder:"Confirm Password",value:this.state.confirmPassword,onChange:this.handleInputChange,onKeyDown:this.handleKeyDown}),r.a.createElement("br",null),e.confirmPassword&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"helper-text"},e.confirmPassword),r.a.createElement("br",null)),r.a.createElement("div",{className:"loader-container"},a&&r.a.createElement("div",{className:"loader"})),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-submit link"},"Sign Up"),e.general&&r.a.createElement("p",{className:"error-msg"},e.general)),r.a.createElement("br",null),r.a.createElement("div",{className:"body-question"},r.a.createElement("span",null,"Already a member? ")," ",r.a.createElement(d.b,{to:"/login"},"Log in here"))))}}]),a}(n.Component),ne=Object(h.b)((function(e){return{user:e.user,UI:e.UI}}),{signupUser:function(e,a){return function(t){t({type:"LOADING_UI"}),S.a.post("/signup",e).then((function(){t(O()),t({type:"CLEAR_ERRORS"}),a.push("/login")})).catch((function(e){t({type:"SET_ERRORS",payload:e.response.data})}))}}})(te),re=t(101),se=t.n(re),le=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(t=Object(i.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(s)))).state={email:"",emailForgot:"",password:"",errors:{},forgotVisible:!1,emailSignIn:!0},t.handleInputChange=function(e){t.setState(Object(ae.a)({},e.target.name,e.target.value))},t.handleKeyDown=function(e){13===e.keyCode&&t.handleSubmit(e)},t.handleSubmit=function(e){e.preventDefault();var a={email:t.state.email,password:t.state.password};t.props.loginUser(a,t.props.history)},t.handleForgotPassword=function(){t.setState({forgotVisible:!t.state.forgotVisible})},t.handleResetEmail=function(e){e.preventDefault();var a=t.state.emailForgot;try{t.props.sendPasswordResetEmail(a)}catch(n){alert(n),console.log(n)}},t.renderForgotPassword=function(e){var a=t.props.UI.loading;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"login-container"},r.a.createElement("h2",{className:"sub-page-title"},"Forgot Password"),r.a.createElement("br",null),r.a.createElement("div",{className:"form-description-container"},r.a.createElement("p",{className:"form-description"},"Please enter your email and we'll send you instructions on how to reset your password")),r.a.createElement("form",{onSubmit:t.handleResetEmail,className:"form login-form"},""!==t.state.emailForgot&&r.a.createElement("p",{className:"field-label"},"Email"),r.a.createElement("input",{type:"text",className:"userdata-input",name:"emailForgot",placeholder:"Email",value:t.state.emailForgot,onChange:t.handleInputChange,onKeyDown:t.handleKeyDown}),e.emailForgot&&r.a.createElement("p",{className:"helper-text"},e.emailForgot),r.a.createElement("br",null),r.a.createElement("div",{className:"loader-container"},a&&r.a.createElement("div",{className:"loader"})),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-submit link"},"Submit")),e.general&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"error-msg"},e.general),r.a.createElement("br",null)),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-sml btn-gray link",onClick:t.handleForgotPassword},"Cancel")))},t.renderLoginForm=function(e,a){return r.a.createElement("div",{className:"login-container"},r.a.createElement("form",{onSubmit:t.handleSubmit,className:"form login-form"},""!==t.state.email&&r.a.createElement("p",{className:"field-label"},"Email"),r.a.createElement("input",{type:"text",className:"userdata-input",name:"email",placeholder:"Email",value:t.state.email,onChange:t.handleInputChange,onKeyDown:t.handleKeyDown}),r.a.createElement("br",null),e.email&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"helper-text"},e.email),r.a.createElement("br",null)),""!==t.state.password&&r.a.createElement("p",{className:"field-label"},"Password"),r.a.createElement("input",{type:"password",className:"userdata-input",name:"password",placeholder:"Password",value:t.state.password,onChange:t.handleInputChange,onKeyDown:t.handleKeyDown}),e.password&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"helper-text"},e.password),r.a.createElement("br",null)),r.a.createElement("br",null),a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"loader-container"},r.a.createElement("div",{className:"loader"}))),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-submit link"},"Login"),e.general&&r.a.createElement("p",{className:"error-msg"},e.general)),r.a.createElement("button",{className:"btn btn-sml btn-gray link",onClick:t.handleForgotPassword},"Forgot Password"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"body-question"},r.a.createElement("span",null,"Don't have an account? ")," ",r.a.createElement(d.b,{to:"/sign-up"},"Sign up here")))},t.renderSignInMethods=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"btn btn-sign-in-with btn-facebook link"},r.a.createElement("i",{className:"fab fa-facebook-f facebook-icon"}),"\xa0\xa0\xa0\xa0Sign in with Facebook"),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-sign-in-with btn-google link"},r.a.createElement("img",{src:se.a,alt:"",className:"google-icon"}),"\xa0\xa0\xa0\xa0Sign in with Google"),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-sign-in-with btn-email link",onClick:t.handleEmailSignIn},r.a.createElement("i",{className:"fas fa-at"}),"\xa0\xa0\xa0\xa0Sign in with email"))},t.renderLoginPage=function(){var e=t.state.errors,a=t.props.UI.loading;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"page-container"},r.a.createElement("div",{className:"center-container"},r.a.createElement(_,{currentPage:"Login",logoType:"vert"}),r.a.createElement("br",null),r.a.createElement("br",null),t.state.emailSignIn?t.state.forgotVisible?t.renderForgotPassword(e):t.renderLoginForm(e,a):t.renderSignInMethods())))},t}return Object(u.a)(a,e),Object(c.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors})}},{key:"render",value:function(){return this.renderLoginPage()}}]),a}(n.Component),oe={loginUser:function(e,a){return function(t){t({type:"LOADING_UI"}),S.a.post("/login",e).then((function(e){G(e.data.token),t(O()),t({type:"CLEAR_ERRORS"}),a.push("/my-backlog")})).catch((function(e){t({type:"SET_ERRORS",payload:e.response.data})}))}},sendPasswordResetEmail:function(e){return function(a){a({type:"LOADING_UI"});var t={email:e};S.a.post("/user/reset-password",t).then((function(){a({type:"CLEAR_ERRORS"}),window.alert("You should recieve password reset instructions ".concat(t.email," shortly"))})).catch((function(e){a({type:"SET_ERRORS",payload:e.response.data}),console.log(e)}))}}},ce=Object(h.b)((function(e){return{user:e.user,UI:e.UI}}),oe)(le),ie=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(t=Object(i.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(s)))).state={selectedPlatform:"",platformButtonClasses:"btn-search link preset focus-button focus-platform",selectedStatus:"",statusButtonClasses:"btn-search link preset focus-button focus-status",selectedButtonClass:"focus-button-selected",editGame:!1},t.handleOptionChange=function(e){var a=e.target;"Platform"===a.getAttribute("type")?t.setState({selectedPlatform:a.value}):t.setState({selectedStatus:a.value})},t.toggleEditGame=function(){t.setState({selectedPlatform:t.props.game.platform.name,selectedStatus:t.props.game.status,editGame:!0})},t.renderPlatformButtons=function(){var e,a;if("My Backlog"!==t.props.currentPage||t.state.editGame){e=r.a.createElement("h2",{className:"focus-header"},"Platforms:");var n=("My Backlog"===t.props.currentPage?t.props.game.raw:t.props.game).platforms;void 0!==n&&null!==n&&n.length>0&&(a=n.map((function(e,a){var n=t.state.selectedPlatform===e.platform.name;return r.a.createElement("button",{key:e.platform.slug,value:e.platform.name,type:"Platform",selected:n,className:"".concat(t.state.platformButtonClasses," ").concat(e.platform.slug," ").concat(n&&t.state.selectedButtonClass),onClick:t.handleOptionChange},e.platform.name)})))}else e=r.a.createElement("h2",{className:"focus-header"},"Platform:"),a=r.a.createElement("button",{key:t.props.game.platform.slug,value:t.props.game.platform.name,className:"".concat(t.state.platformButtonClasses," ").concat(t.props.game.platform.slug)},t.props.game.platform.name);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"focus-platform-container"},e,a))},t.renderStatus=function(){var e,a=new Date(t.props.game.released),n=new Date;e=a.getTime()>=n.getTime()||null===t.props.game.released?["Want to Play"]:["Want to Play","Owned","Playing","Beaten","Dropped"];var s,l=r.a.createElement("h2",{className:"focus-header focus-header-status"},"Status:");if("Add Game"===t.props.currentPage||t.state.editGame)s=e.map((function(e,a){var n=t.state.selectedStatus===e;return r.a.createElement("button",{key:a,value:e,selected:n,className:"".concat(t.state.statusButtonClasses," ").concat(n&&t.state.selectedButtonClass),onClick:t.handleOptionChange},e)}));else{var o=t.props.game.status;s=r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{key:t.props.game.status,value:o,selected:!1,className:"".concat(t.state.statusButtonClasses)},o))}return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"focus-status-container"},l,s))},t.addGame=function(){try{t.validateSelections()?(t.props.handleAddGame(t.props.game.slug,t.state.selectedPlatform,t.state.selectedStatus),t.props.handleClose()):alert("Please select a platform and a status!")}catch(e){console.log(e)}},t.editGame=function(){try{t.validateSelections()?(t.props.handleEditGame(t.props.game,t.state.selectedPlatform,t.state.selectedStatus),t.props.handleClose()):alert("Please select a platform and a status!")}catch(e){console.log(e)}},t.deleteGame=function(){if(window.confirm("Are you sure you want to delete this game from your backlog?"))try{t.props.handleDeleteGame(t.props.game),t.props.handleClose()}catch(e){console.log(e)}},t.renderBottomPortion=function(){return"Add Game"===t.props.currentPage?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"btn btn-positive link",onClick:t.addGame},"Add To Backlog")):t.state.editGame?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"btn btn-positive link",onClick:t.editGame},"Save Edits"),r.a.createElement("button",{className:"btn link btn-close",onClick:t.deleteGame},"Delete From Backlog")):r.a.createElement("button",{className:"btn link",onClick:t.toggleEditGame},"Edit")},t}return Object(u.a)(a,e),Object(c.a)(a,[{key:"componentDidMount",value:function(){"Add Game"===this.props.currentPage&&this.props.handleSearchVisibility()}},{key:"validateSelections",value:function(){return""!==this.state.selectedPlatform&&""!==this.state.selectedStatus}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"focus-outer-container"},r.a.createElement("button",{className:"btn link btn-gray close-game-focus",onClick:this.props.handleClose},r.a.createElement("i",{className:"fas fa-arrow-left"})),r.a.createElement("div",{className:"focus-container"},r.a.createElement("div",{className:"focus-box"},r.a.createElement("div",{className:"card-container"},r.a.createElement($,{key:this.props.game.name,game:this.props.game,parentComponent:"Game Focus",currentPage:this.props.currentPage})),r.a.createElement("div",{className:"focus-details"},r.a.createElement("div",{className:"platform-container"},this.renderPlatformButtons()),this.renderStatus(),r.a.createElement("br",null),r.a.createElement("div",{className:"focus-bottom-buttons"},this.renderBottomPortion())))),r.a.createElement("br",null)))}}]),a}(n.Component),me=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(t=Object(i.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(s)))).state={gameFocusVisible:!1,gameForFocus:"",gameFocus:""},t.handleCardClick=function(e){for(var a=e.target;!a.classList.value.includes("game-card");)a=a.parentNode;var n=a.getAttribute("slug");"My Backlog"===t.props.currentPage&&t.props.handleToggleFilter("hide"),t.renderGameFocus(n)},t.drawCards=function(){return t.props.games.map((function(e,a){return r.a.createElement($,{key:a,game:e,handleClick:t.handleCardClick,currentPage:t.props.currentPage})}))},t.renderGameFocus=function(){var e=Object(z.a)(Y.a.mark((function e(a){var n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("My Backlog"===t.props.currentPage)n=t.props.handleGetGameFromList(a),t.setState({gameFocusVisible:!0,gameForFocus:n,gameFocus:r.a.createElement(ie,{game:n,currentPage:t.props.currentPage,handleEditGame:t.props.handleEditGame,handleDeleteGame:t.props.handleDeleteGame,handleClose:t.hideGameFocus})});else try{Q(a).then((function(e){t.setState({gameFocusVisible:!0,gameForFocus:e,gameFocus:r.a.createElement(ie,{game:e,currentPage:t.props.parentComponent,handleAddGame:t.props.handleAddGame,handleSearchVisibility:t.props.handleSearchVisibility,handleClose:t.hideGameFocus})})}))}catch(s){console.log(s)}case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),t.hideGameFocus=function(){t.setState({gameFocusVisible:!1}),"Add Game"===t.props.currentPage?t.props.handleSearchVisibility():"My Backlog"===t.props.currentPage&&t.props.handleToggleFilter("show")},t}return Object(u.a)(a,e),Object(c.a)(a,[{key:"renderItems",value:function(){return this.state.gameFocusVisible?this.state.gameFocus:this.drawCards()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),this.renderItems())}}]),a}(n.Component),ue=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(t=Object(i.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(s)))).state={statusTypes:[],filterButtonVisible:!0,filterVisible:!1,filterIndex:0},t.filterBacklogGames=function(e){var a,n=t.state.filterIndex;if(0!=n){var r=t.state.statusTypes[n];a=e.filter((function(e){if(e.status===r)return e}))}else a=e;return a},t.renderStatBar=function(e){var a=t.state.statusTypes.map((function(a){var t=0,n={};return e.forEach((function(e){e.status===a&&t++})),n.status=a,n.count=t,n})),n=a.map((function(e,t){if(t>0)return r.a.createElement(r.a.Fragment,{key:e.status},r.a.createElement("p",{className:"stat"},"".concat(e.status,": ").concat(e.count)),t!==a.length-1&&r.a.createElement("p",{className:"stat stat-separator"},"|"))}));return r.a.createElement("div",{className:"stat-container"},r.a.createElement("div",{className:"stat-bar"},r.a.createElement("p",{className:"stat"},"Game Count: ",e.length),r.a.createElement("p",{className:"stat stat-separator"},"|"),n))},t.renderStatusFilters=function(){var e,a=t.state.statusTypes,n=t.state.filterIndex;return e=a.map((function(e,a){var s=a==n;return r.a.createElement("button",{key:a,value:e,"value-index":a,selected:s,className:"".concat("btn btn-status-filter link"," ").concat(s&&"btn-selected-outline"),onClick:t.handleFilterSelect},e)})),r.a.createElement(r.a.Fragment,null,e)},t.renderFilter=function(){return r.a.createElement("div",{className:"filter-container"},t.state.filterButtonVisible&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"btn btn-filter link",onClick:t.handleFilterGames},"Filter"),!t.state.filterVisible&&t.state.filterIndex>0&&r.a.createElement("div",{className:"status-filter-container "},"Status: ".concat(t.state.statusTypes[t.state.filterIndex]))),t.state.filterVisible&&t.renderStatusFilters())},t.handleFilterSelect=function(e){var a=e.target.getAttribute("value-index");t.setState({filterIndex:a})},t.handleFilterGames=function(){t.setState({filterVisible:!t.state.filterVisible})},t.toggleFilter=function(e){"hide"===e?t.setState({filterButtonVisible:!1,filterVisible:!1}):"show"===e&&t.setState({filterButtonVisible:!0})},t.renderCards=function(e){return r.a.createElement("div",{className:"content card-container"},r.a.createElement(me,{games:t.filterBacklogGames(e),parentComponent:"My Backlog",currentPage:"My Backlog",handleToggleFilter:t.toggleFilter,handleEditGame:t.props.handleEditGame,handleDeleteGame:t.props.handleDeleteGame,handleGetGameFromList:t.props.handleGetGameFromList}))},t.renderContent=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"center-container"},r.a.createElement("h1",{className:"page-title page-title-sml"},"My Backlog"),r.a.createElement("div",{className:"status-bar"},t.renderStatBar(e),t.renderFilter())),r.a.createElement("div",{className:"content"},t.renderCards(e)))},t}return Object(u.a)(a,e),Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=["Want to Play","Owned","Playing","Beaten","Dropped"];e.unshift("All"),this.setState({statusTypes:e})}},{key:"render",value:function(){var e=this.props.games;return void 0===e&&(e=[]),this.renderContent(e)}}]),a}(n.Component),de=Object(h.b)((function(e){return{user:e.user,UI:e.UI}}))(ue),pe=function(){function e(a,t,n,r){Object(o.a)(this,e),this.name=a.name,this.platform=this.assignPlatform(a,t),this.status=this.assignStatus(n),this.priority=r,this.released=a.released,this.rating=a.rating,this.background_image=a.background_image,this.slug=a.slug,this.raw=a}return Object(c.a)(e,[{key:"assignStatus",value:function(e){var a;return["Want to Play","Owned","Playing","Beaten","Dropped"].forEach((function(t){t===e&&(a=e)})),a}},{key:"assignPlatform",value:function(e,a){var t="";return e.platforms.forEach((function(e){e.platform.name===a&&(t=e.platform)})),t}}],[{key:"convertToGameObject",value:function(a,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new e(a,t,n)}}]),e}(),he=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(t=Object(i.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(s)))).state={isLoaded:!1,rawger:"",pageIndex:0,navbarClasses:[],username:"",games:[],verified:"",userData:"",fetchFailed:!1},t.getGameFromList=function(e){var a;return M(t.props).games.forEach((function(t){e===t.slug&&(a=t)})),a},t.editGame=function(e,a,n){var r=M(t.props),s=r.username,l=r.games,o=new pe(e.raw,a,n),c=l.map((function(a){return a.name===e.raw.name?o:a}));t.props.updateGames(s,c)},t.deleteGame=function(e){var a=M(t.props),n=a.username,r=a.games.filter((function(a){var t;return a.name!==e.raw.name&&(t=a),t}));t.props.updateGames(n,r)},t.loadUserDataFromProps=function(){var e=t.props.user,a=e.credentials,n=a.username,r=a.games,s=a.emailVerified,l=e.loading,o=e.authenticated;return{user:t.props.user,username:n,games:r,emailVerified:s,loading:l,authenticated:o}},t.onSwitchPage=function(e){t.setState({pageIndex:e})},t.handleLogout=function(){try{t.props.logoutUser(),t.setState({popupVisible:!1}),t.props.history.push("/login")}catch(e){console.log(e)}},t.renderBacklog=function(){var e=M(t.props),a=e.games,n=e.loading,s=e.authenticated;setTimeout((function(){var e=M(t.props).games;t.state.fetchFailed||null!==e&&void 0!==e||(window.alert("Could not authenticate/retrieve user data. Please log in again"),t.setState({fetchFailed:!0}),C.dispatch(P()))}),4500);var l=r.a.createElement(de,{pageName:"My Backlog",games:a,handleSearch:Z,handleAddGame:t.addGameToList,handleEditGame:t.editGame,handleDeleteGame:t.deleteGame,handleGetGameFromList:t.getGameFromList}),o=r.a.createElement("div",{className:"page-container"},r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"content"},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"loader-container"},n&&r.a.createElement("div",{className:"loader"})))));r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"page-container"},r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"center-container"},r.a.createElement("h2",{className:"page-title"},"Your email is not verified!"),r.a.createElement("br",null),r.a.createElement("p",{className:"unverified-body"},"In order to use BCKLG, please click the button below and follow the instructions sent your email."),r.a.createElement("br",null),r.a.createElement("button",{className:"btn link",onClick:t.props.sendEmailVerification},"Send verification email"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",null,"Once you've verified your email, logout and re-login to use BCKLG."),r.a.createElement("button",{className:"btn nav-link link btn-pop-up",onClick:t.handleLogout},"Logout"))))));return r.a.createElement(r.a.Fragment,null,n?o:s?l:t.props.history.push("/"))},t}return Object(u.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){return this.renderBacklog()}}]),a}(n.Component),ge={logoutUser:P,updateGames:F,sendEmailVerification:function(){return function(e){return e({type:"LOADING_UI"}),new Promise((function(a,t){S.a.post("/user/email-verification").then((function(){e({type:"CLEAR_ERRORS"}),e(O());window.alert("Email verification instructions sent."),a(!0)})).catch((function(a){e({type:"SET_ERRORS",payload:a.response.data}),console.log(a),t(!1)}))}))}}},fe=Object(h.b)((function(e){return{user:e.user}}),ge)(he),Ee=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(t=Object(i.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(s)))).state={searchResults:[],query:"",year:2020,errorMessage:"Could not find game! Please try again",displayErrorMessage:!1,searchInitiated:!1,searchVisible:!0,gameBuffer:[]},t.handleInputChange=function(e){var a=e.target.value;t.setState({query:a})},t.handleSubmitSearch=function(e){t.renderSearchResults(t.state.query)},t.renderSearchResults=function(){var e=Object(z.a)(Y.a.mark((function e(a){var n,r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({displayErrorMessage:!1}),n=[],e.next=4,Z(a).then((function(e){return e})).catch((function(e){console.log(e)}));case 4:if("string"!==typeof(r=e.sent)){e.next=8;break}return t.setState({displayErrorMessage:!0}),e.abrupt("return");case 8:n=r,t.setState({searchResults:n,searchInitiated:!0});case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),t.populateYears=function(){for(var e=[],a=(new Date).getFullYear();a>1969;a--)e.push(r.a.createElement("option",{className:"year",key:a,value:a},a));return e},t.handleKeyDown=function(e){13===e.keyCode&&t.renderSearchResults(t.state.query)},t.handleChange=function(e){var a=e.target.value;t.setState({year:a})},t.handleSearchPreset=function(){var e=Object(z.a)(Y.a.mark((function e(a){var n,r,s;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.target.name,r=t.state.year,s="Most Popular"===n?"added":"rating",fetch("https://api.rawg.io/api/games?dates=".concat(r,"-01-01,").concat(r,"-12-31&ordering=-").concat(s)).then((function(e){return e.json()})).then((function(e){t.setState({searchResults:e.results})}));case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),t.toggleSearchVisibility=function(){t.state.searchVisible?t.setState({searchVisible:!1}):t.setState({searchVisible:!0})},t.gameExists=function(e,a){var t=!1;return void 0!==a&&a.length>0&&a.forEach((function(a){a.slug===e&&(t=!0)})),t},t.addGameToList=function(){var e=Object(z.a)(Y.a.mark((function e(a,n,r){var s,l,o,c,i;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=M(t.props),l=s.username,o=s.games,c=o,!t.gameExists(a,c)){e.next=7;break}alert("Game already exits!"),e.next=12;break;case 7:return e.next=9,Q(a).then((function(e){return e})).then((function(e){return pe.convertToGameObject(e,n,r)})).catch((function(e){console.log(e)}));case 9:i=e.sent,void 0!==c&&c.length>0?c.unshift(i):c=[i],t.props.updateGames(l,c);case 12:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),t.renderSearchContainer=function(){if(t.state.searchVisible)return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"search-container"},r.a.createElement("div",{className:"search"},r.a.createElement("input",{type:"text",className:"search-box",placeholder:"Which game are you looking for?",value:t.state.query,onChange:t.handleInputChange,onKeyDown:t.handleKeyDown}),r.a.createElement("button",{className:"btn-search link",onClick:t.handleSubmitSearch},"Search")),r.a.createElement("div",{className:"search-presets"},r.a.createElement("button",{className:"btn-search link preset",onClick:t.handleSearchPreset,name:"Most Popular"},"Most Popular"),r.a.createElement("button",{className:"btn-search link preset",onClick:t.handleSearchPreset,name:"Highest Rated"},"Highest Rated"),r.a.createElement("select",{className:"btn-search link preset year-select",onChange:t.handleChange},t.populateYears()))))},t}return Object(u.a)(a,e),Object(c.a)(a,[{key:"renderItems",value:function(){return this.state.displayErrorMessage||this.state.searchResults.length<1&&this.state.searchInitiated?r.a.createElement("h2",null,this.state.errorMessage):r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"content card-container"},r.a.createElement(me,{games:this.state.searchResults,parentComponent:"Add Game",currentPage:"Add Game",handleAddGame:this.addGameToList,handleGetGameFromList:this.props.handleGetGameFromList,handleSearchVisibility:this.toggleSearchVisibility})))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"center-container"},r.a.createElement("h1",{className:"page-title page-title-sml"},"Add Game"),this.renderSearchContainer(),this.renderItems()))}}]),a}(n.Component),be={updateGames:F},ve=Object(h.b)((function(e){return{user:e.user,UI:e.UI}}),be)(Ee),ye=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(t=Object(i.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(s)))).state={currentPassword:"",newPassword:"",confirmNewPassword:"",editVisible:!1,errors:{},passwordChanged:!1},t.handleDeleteAccount=function(e){var a=t.props.user.credentials,n=a.username,r=a.email;if(window.confirm("Are you sure you want to delete your account?"))if(window.prompt("Enter your account's email address below to confirm:")!==r)alert("Incorrect input! Please try again");else try{t.props.deleteAccount(n),alert("Account successfully deleted!"),t.props.logoutUser(),t.props.history.push("/")}catch(s){console.log(s),alert(s)}else e.preventDefault()},t.handleSaveChanges=function(){var e=Object(z.a)(Y.a.mark((function e(a){var n,r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n=t.props.user.credentials.email,r={email:n,currentPassword:t.state.currentPassword,newPassword:t.state.newPassword,confirmNewPassword:t.state.confirmNewPassword},e.next=5,t.props.updateUserPassword(r).then((function(e){e&&(t.handleEditAccount(),t.props.history.push("/account"),t.setState({currentPassword:"",newPassword:"",confirmNewPassword:""}))})).catch((function(e){console.log(e)}));case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),t.handleInputChange=function(e){t.setState(Object(ae.a)({},e.target.name,e.target.value))},t.handleKeyDown=function(e){13===e.keyCode&&t.handleSaveChanges(e)},t.handleEditAccount=function(e){t.setState({editVisible:!t.state.editVisible})},t.renderEditAccount=function(e){var a=t.props.UI.loading;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"sub-page-title"},"Change Password"),r.a.createElement("form",{onSubmit:t.handleSaveChanges,className:"form login-form"},r.a.createElement("div",{className:"field-label-container"},""!==t.state.currentPassword&&r.a.createElement("p",{className:"field-label"},"Current Password"),r.a.createElement("input",{type:"password",className:"userdata-input userdata-input-account",name:"currentPassword",placeholder:"Current Password",onChange:t.handleInputChange,onKeyDown:t.handleKeyDown,value:t.state.currentPassword}),r.a.createElement("br",null),e.currentPassword&&r.a.createElement("p",{className:"helper-text change-password-helper"},e.currentPassword)),r.a.createElement("div",{className:"field-label-container"},""!==t.state.newPassword&&r.a.createElement("p",{className:"field-label"},"New Password"),r.a.createElement("input",{type:"password",className:"userdata-input userdata-input-account",name:"newPassword",placeholder:"New Password",onChange:t.handleInputChange,onKeyDown:t.handleKeyDown,value:t.state.newPassword}),r.a.createElement("br",null),e.newPassword&&r.a.createElement("p",{className:"change-password-helper helper-text"},e.newPassword)),r.a.createElement("div",{className:"field-label-container"},""!==t.state.confirmNewPassword&&r.a.createElement("p",{className:"field-label"},"Confirm New Password"),r.a.createElement("input",{type:"password",className:"userdata-input userdata-input-account",name:"confirmNewPassword",placeholder:"Confirm New Password",onChange:t.handleInputChange,value:t.state.confirmNewPassword,onKeyDown:t.handleKeyDown}),r.a.createElement("br",null),e.confirmNewPassword&&r.a.createElement("p",{className:"change-password-helper helper-text"},e.confirmNewPassword)),r.a.createElement("div",{className:"loader-container"},a&&r.a.createElement("div",{className:"loader"})),r.a.createElement("button",{className:"btn link"},"Save Changes"),r.a.createElement("button",{className:"btn btn-negative link",onClick:t.handleDeleteAccount},"Delete account")),r.a.createElement("button",{className:"btn link btn-gray",onClick:t.handleEditAccount},"Cancel"))},t}return Object(u.a)(a,e),Object(c.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors})}},{key:"render",value:function(){var e=this.state.errors,a=this.props.user.credentials,t=a.username,n=a.email;return this.state.passwordChanged&&(alert("Password updated successfully!"),this.setState({passwordChanged:!1})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"center-container"},r.a.createElement("h1",{className:"page-title page-title-sml"},"Account"),r.a.createElement("br",null),r.a.createElement("div",{className:"field-label-container"},r.a.createElement("p",{className:"field-label"},"Username")),r.a.createElement("div",{className:"field-box"},r.a.createElement("p",null,t)),r.a.createElement("br",null),r.a.createElement("div",{className:"field-label-container"},r.a.createElement("p",{className:"field-label"},"Email")),r.a.createElement("div",{className:"field-box"},r.a.createElement("p",null,n)),this.state.editVisible?r.a.createElement(r.a.Fragment,null,this.renderEditAccount(e)):r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("button",{className:"btn link",onClick:this.handleEditAccount},"Change Password"))))}}]),a}(n.Component),Ne={deleteAccount:function(e){return function(a){a({type:"LOADING_USER"}),S.a.post("user/delete",e).then((function(){a(P())})).catch((function(e){return console.log(e)}))}},updateUserPassword:function(e){return function(a){a({type:"LOADING_UI"});var t={email:e.email,currentPassword:e.currentPassword,newPassword:e.newPassword,confirmNewPassword:e.confirmNewPassword};return new Promise((function(e,n){S.a.post("/user/update-password",t).then((function(){a({type:"CLEAR_ERRORS"}),a(O());window.alert("Password updated successfully"),e(!0)})).catch((function(e){a({type:"SET_ERRORS",payload:e.response.data}),console.log(e),n(!1)}))}))}},logoutUser:P},we=Object(h.b)((function(e){return{user:e.user,UI:e.UI}}),Ne)(ye);S.a.defaults.baseURL="https://europe-west1-bcklg-6b059.cloudfunctions.net/api";var Ce=localStorage.firebaseIdToken;Ce&&(1e3*U()(Ce).exp<Date.now()?(C.dispatch(P()),window.location.href="/"):(C.dispatch({type:"SET_AUTHENTICATED"}),S.a.defaults.headers.common.Authorization=Ce,C.dispatch(O())));var ke=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(t=Object(i.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(s)))).state={homeNavItems:["Sign Up","Login"],bcklgNavItems:["My Backlog","Add Game"]},t.renderApp=function(){var e=r.a.createElement(d.a,{basename:"/"},r.a.createElement(H,{homeNav:t.state.homeNavItems,bcklgNav:t.state.bcklgNavItems,location:t.props.location}),r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/",component:ee}),r.a.createElement("div",{className:"page-body"},r.a.createElement("div",{className:"page-container"},r.a.createElement(D,{exact:!0,path:"/sign-up",component:ne}),r.a.createElement(D,{exact:!0,path:"/login",component:ce}),r.a.createElement(p.b,{exact:!0,path:"/my-backlog",component:fe}),r.a.createElement(p.b,{exact:!0,path:"/add-game",component:ve}),r.a.createElement(p.b,{exact:!0,path:"/account",component:we})))));return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{store:C},r.a.createElement(r.a.Fragment,null,e)),r.a.createElement(q,null))},t}return Object(u.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.renderApp())}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(ke,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},65:function(e,a,t){e.exports=t.p+"static/media/BCKLG_Logo.ff82a027.svg"}},[[103,1,2]]]);
//# sourceMappingURL=main.fd2c921b.chunk.js.map